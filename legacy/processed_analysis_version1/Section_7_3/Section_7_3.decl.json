[{"value":{"range":[919,942],"original":true},"type":{"range":[914,918],"original":true},"signature":{"range":[900,918],"pp":" (s : Series) : Prop","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[879,942],"pp":"abbrev nonneg (s : Series) : Prop :=\n  ∀ n, s.seq n ≥ 0","original":true},"params":[{"type":[904,910],"ref":[901,902],"id":[901,902],"bi":"default"}],"name":["Chapter7","Series","nonneg"],"modifiers":null,"kind":"abbrev","id":{"range":[886,899],"original":true}},{"value":{"range":[1023,1034],"original":true},"type":{"range":[1004,1022],"original":true},"signature":{"range":[976,1022],"pp":" {s : Series} (h : s.nonneg) : Monotone s.partial","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[944,1034],"pp":"abbrev partial_of_nonneg {s : Series} (h : s.nonneg) : Monotone s.partial := by sorry","original":true},"params":[{"type":[980,986],"ref":[977,978],"id":[977,978],"bi":"implicit"},{"type":[992,1000],"ref":[989,990],"id":[989,990],"bi":"default"}],"name":["Chapter7","Series","partial_of_nonneg"],"modifiers":null,"kind":"abbrev","id":{"range":[951,975],"original":true}},{"value":{"range":[1176,1869],"original":true},"type":{"range":[1128,1175],"original":true},"signature":{"range":[1100,1175],"pp":" {s : Series} (h : s.nonneg) : s.converges ↔ ∃ M, ∀ N, s.partial N ≤ M","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[1036,1869],"pp":"/-- Proposition 7.3.1 -/\ntheorem converges_of_nonneg_iff {s : Series} (h : s.nonneg) : s.converges ↔ ∃ M, ∀ N, s.partial N ≤ M := by\n  -- This broadly follows the argument in the text, though for one direction I choose to use Mathlib routines rather than Chapter6 results.\n  \n  constructor\n  . intro hconv\n    set S : Chapter6.Sequence := ⟨s.m, s.partial, by intro n hn; simp [Series.partial, hn]⟩\n    have : S.IsBounded := by\n      apply S.bounded_of_convergent\n      rw [Chapter6.Sequence.converges_iff_Tendsto']\n      grind\n    choose M hpos hM using this\n    use M; peel hM with N hM\n    exact (le_abs_self _).trans hM\n  intro hbound\n  obtain hinfin | hfin := tendsto_of_monotone (partial_of_nonneg h)\n  . choose M hM using hbound\n    choose N hN using (hinfin.eventually_gt_atTop M).exists\n    grind\n  assumption","original":true},"params":[{"type":[1104,1110],"ref":[1101,1102],"id":[1101,1102],"bi":"implicit"},{"type":[1116,1124],"ref":[1113,1114],"id":[1113,1114],"bi":"default"}],"name":["Chapter7","Series","converges_of_nonneg_iff"],"modifiers":null,"kind":"theorem","id":{"range":[1069,1099],"original":true}},{"value":{"range":[1982,2196],"original":true},"type":{"range":[1970,1981],"original":true},"signature":{"range":[1903,1981],"pp":" {s : Series} (h : s.nonneg) {M : ℝ} (hM : ∀ N, s.partial N ≤ M) : s.sum ≤ M","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[1871,2196],"pp":"theorem sum_of_nonneg_lt {s : Series} (h : s.nonneg) {M : ℝ} (hM : ∀ N, s.partial N ≤ M) : s.sum ≤ M :=\n  by\n  have : ∃ M, ∀ N, s.partial N ≤ M := by use M\n  rw [← converges_of_nonneg_iff h] at this; simp [sum, this]\n  have hconv := this.choose_spec; simp [convergesTo] at hconv; exact le_of_tendsto' hconv hM","original":true},"params":[{"type":[1907,1913],"ref":[1904,1905],"id":[1904,1905],"bi":"implicit"},{"type":[1919,1927],"ref":[1916,1917],"id":[1916,1917],"bi":"default"},{"type":[1932,1935],"ref":[1930,1931],"id":[1930,1931],"bi":"implicit"},{"type":[1942,1966],"ref":[1938,1940],"id":[1938,1940],"bi":"default"}],"name":["Chapter7","Series","sum_of_nonneg_lt"],"modifiers":null,"kind":"theorem","id":{"range":[1879,1902],"original":true}},{"value":{"range":[2324,2421],"original":true},"type":{"range":[2302,2323],"original":true},"signature":{"range":[2238,2323],"pp":" {s : Series} (hnon : s.nonneg) (hconv : s.converges) (N : ℤ) : s.partial N ≤ s.sum","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[2198,2421],"pp":"theorem partial_le_sum_of_nonneg {s : Series} (hnon : s.nonneg) (hconv : s.converges) (N : ℤ) : s.partial N ≤ s.sum :=\n  by\n  apply (partial_of_nonneg hnon).ge_of_tendsto\n  simp [sum, hconv]; exact hconv.choose_spec","original":true},"params":[{"type":[2242,2248],"ref":[2239,2240],"id":[2239,2240],"bi":"implicit"},{"type":[2257,2265],"ref":[2251,2255],"id":[2251,2255],"bi":"default"},{"type":[2275,2286],"ref":[2268,2273],"id":[2268,2273],"bi":"default"},{"type":[2293,2296],"ref":[2289,2290],"id":[2289,2290],"bi":"default"}],"name":["Chapter7","Series","partial_le_sum_of_nonneg"],"modifiers":null,"kind":"theorem","id":{"range":[2206,2237],"original":true}},{"value":{"range":[2576,2637],"original":true},"type":{"range":[2558,2575],"original":true},"signature":{"range":[2517,2575],"pp":" {s : Series} (hnon : s.nonneg) (N : ℤ) : 0 ≤ s.partial N","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[2423,2637],"pp":"/-- Some useful nonnegativity lemmas for later applications. -/\ntheorem partial_nonneg {s : Series} (hnon : s.nonneg) (N : ℤ) : 0 ≤ s.partial N := by simp [Series.partial];\n  apply Finset.sum_nonneg; aesop","original":true},"params":[{"type":[2521,2527],"ref":[2518,2519],"id":[2518,2519],"bi":"implicit"},{"type":[2536,2544],"ref":[2530,2534],"id":[2530,2534],"bi":"default"},{"type":[2551,2554],"ref":[2547,2548],"id":[2547,2548],"bi":"default"}],"name":["Chapter7","Series","partial_nonneg"],"modifiers":null,"kind":"theorem","id":{"range":[2495,2516],"original":true}},{"value":{"range":[2710,2825],"original":true},"type":{"range":[2698,2709],"original":true},"signature":{"range":[2668,2709],"pp":" {s : Series} (hnon : s.nonneg) : 0 ≤ s.sum","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[2639,2825],"pp":"theorem sum_of_nonneg {s : Series} (hnon : s.nonneg) : 0 ≤ s.sum :=\n  by\n  by_cases h : s.converges <;> simp [Series.sum, h]\n  exact ge_of_tendsto' h.choose_spec (partial_nonneg hnon)","original":true},"params":[{"type":[2671,2677],"ref":[2669,2670],"id":[2669,2670],"bi":"implicit"},{"type":[2686,2694],"ref":[2680,2684],"id":[2680,2684],"bi":"default"}],"name":["Chapter7","Series","sum_of_nonneg"],"modifiers":null,"kind":"theorem","id":{"range":[2647,2667],"original":true}},{"value":{"range":[3081,3092],"original":true},"type":{"range":[3016,3080],"original":true},"signature":{"range":[2916,3080],"pp":" {s t : Series} (hm : s.m = t.m) (hcomp : ∀ n ≥ s.m, |s.seq n| ≤ t.seq n) (hconv : t.converges) :\n  s.absConverges ∧ |s.sum| ≤ s.abs.sum ∧ s.abs.sum ≤ t.sum","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[2827,3092],"pp":"/-- Corollary 7.3.2 (Comparison test) / Exercise 7.3.1 -/\ntheorem converges_of_le {s t : Series} (hm : s.m = t.m) (hcomp : ∀ n ≥ s.m, |s.seq n| ≤ t.seq n) (hconv : t.converges) :\n    s.absConverges ∧ |s.sum| ≤ s.abs.sum ∧ s.abs.sum ≤ t.sum := by sorry","original":true},"params":[{"type":[2922,2928],"ref":[2917,2918],"id":[2917,2918],"bi":"implicit"},{"type":[2922,2928],"ref":[2919,2920],"id":[2919,2920],"bi":"implicit"},{"type":[2935,2944],"ref":[2931,2933],"id":[2931,2933],"bi":"default"},{"type":[2954,2990],"ref":[2947,2952],"id":[2947,2952],"bi":"default"},{"type":[3001,3012],"ref":[2993,2998],"id":[2993,2998],"bi":"default"}],"name":["Chapter7","Series","converges_of_le"],"modifiers":null,"kind":"theorem","id":{"range":[2893,2915],"original":true}},{"value":{"range":[3239,3250],"original":true},"type":{"range":[3228,3238],"original":true},"signature":{"range":[3124,3238],"pp":" {s t : Series} (hm : s.m = t.m) (hcomp : ∀ n ≥ s.m, |s.seq n| ≤ t.seq n) (hdiv : ¬s.absConverges) : t.diverges","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[3094,3250],"pp":"theorem diverges_of_ge {s t : Series} (hm : s.m = t.m) (hcomp : ∀ n ≥ s.m, |s.seq n| ≤ t.seq n)\n    (hdiv : ¬s.absConverges) : t.diverges := by sorry","original":true},"params":[{"type":[3130,3136],"ref":[3125,3126],"id":[3125,3126],"bi":"implicit"},{"type":[3130,3136],"ref":[3127,3128],"id":[3127,3128],"bi":"implicit"},{"type":[3143,3152],"ref":[3139,3141],"id":[3139,3141],"bi":"default"},{"type":[3162,3198],"ref":[3155,3160],"id":[3155,3160],"bi":"default"},{"type":[3207,3224],"ref":[3201,3205],"id":[3201,3205],"bi":"default"}],"name":["Chapter7","Series","diverges_of_ge"],"modifiers":null,"kind":"theorem","id":{"range":[3102,3123],"original":true}},{"value":{"range":[3415,3426],"original":true},"type":{"range":[3362,3414],"original":true},"signature":{"range":[3337,3414],"pp":" {x : ℝ} (hx : |x| < 1) : (fun n ↦ x ^ n : Series).convergesTo (1 / (1 - x))","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[3252,3426],"pp":"/-- Lemma 7.3.3 (Geometric series) / Exercise 7.3.2 -/\ntheorem converges_geom {x : ℝ} (hx : |x| < 1) : (fun n ↦ x ^ n : Series).convergesTo (1 / (1 - x)) := by sorry","original":true},"params":[{"type":[3341,3344],"ref":[3338,3339],"id":[3338,3339],"bi":"implicit"},{"type":[3351,3358],"ref":[3347,3349],"id":[3347,3349],"bi":"default"}],"name":["Chapter7","Series","converges_geom"],"modifiers":null,"kind":"theorem","id":{"range":[3315,3336],"original":true}},{"value":{"range":[3526,3537],"original":true},"type":{"range":[3486,3525],"original":true},"signature":{"range":[3461,3525],"pp":" {x : ℝ} (hx : |x| < 1) : (fun n ↦ x ^ n : Series).absConverges","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[3428,3537],"pp":"theorem absConverges_geom {x : ℝ} (hx : |x| < 1) : (fun n ↦ x ^ n : Series).absConverges := by sorry","original":true},"params":[{"type":[3465,3468],"ref":[3462,3463],"id":[3462,3463],"bi":"implicit"},{"type":[3475,3482],"ref":[3471,3473],"id":[3471,3473],"bi":"default"}],"name":["Chapter7","Series","absConverges_geom"],"modifiers":null,"kind":"theorem","id":{"range":[3436,3460],"original":true}},{"value":{"range":[3631,3642],"original":true},"type":{"range":[3595,3630],"original":true},"signature":{"range":[3568,3630],"pp":" {x : ℝ} (hx : |x| ≥ 1) : (fun n ↦ x ^ n : Series).diverges","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[3539,3642],"pp":"theorem diverges_geom {x : ℝ} (hx : |x| ≥ 1) : (fun n ↦ x ^ n : Series).diverges := by sorry","original":true},"params":[{"type":[3572,3575],"ref":[3569,3570],"id":[3569,3570],"bi":"implicit"},{"type":[3582,3591],"ref":[3578,3580],"id":[3578,3580],"bi":"default"}],"name":["Chapter7","Series","diverges_geom"],"modifiers":null,"kind":"theorem","id":{"range":[3547,3567],"original":true}},{"value":{"range":[3738,3749],"original":true},"type":{"range":[3689,3737],"original":true},"signature":{"range":[3678,3737],"pp":" (x : ℝ) : (fun n ↦ x ^ n : Series).converges ↔ |x| < 1","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[3644,3749],"pp":"theorem converges_geom_iff (x : ℝ) : (fun n ↦ x ^ n : Series).converges ↔ |x| < 1 := by sorry","original":true},"params":[{"type":[3682,3685],"ref":[3679,3680],"id":[3679,3680],"bi":"default"}],"name":["Chapter7","Series","converges_geom_iff"],"modifiers":null,"kind":"theorem","id":{"range":[3652,3677],"original":true}},{"value":{"range":[3978,7339],"original":true},"type":{"range":[3914,3977],"original":true},"signature":{"range":[3827,3977],"pp":" {s : Series} (hm : s.m = 1) (hs : s.nonneg) (hmono : ∀ n ≥ 1, s.seq (n + 1) ≤ s.seq n) :\n  s.converges ↔ (fun k ↦ 2 ^ k * s.seq (2 ^ k) : Series).converges","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[3751,7339],"pp":"/-- Proposition 7.3.4 (Cauchy criterion) -/\ntheorem cauchy_criterion {s : Series} (hm : s.m = 1) (hs : s.nonneg) (hmono : ∀ n ≥ 1, s.seq (n + 1) ≤ s.seq n) :\n    s.converges ↔ (fun k ↦ 2 ^ k * s.seq (2 ^ k) : Series).converges := by\n  -- This proof is written to follow the structure of the original text.\n  \n  set t := (fun k ↦ 2 ^ k * s.seq (2 ^ k) : Series)\n  have ht : t.nonneg := by intro n; by_cases h : n ≥ 0 <;> simp [t, h]; grind\n  have hmono' : ∀ n ≥ 1, ∀ m ≥ n, s.seq m ≤ s.seq n :=\n    by\n    intro n hn m hm; obtain ⟨k, rfl⟩ := Int.le.dest hm; clear hm\n    induction' k with k hk; simp\n    convert (hmono (n + k) (by grind)).trans hk using 2; grind\n  have htm : t.m = 0 := by simp [t]\n  rw [converges_of_nonneg_iff hs, converges_of_nonneg_iff ht]\n  set S := s.partial\n  set T := t.partial\n  have Lemma_7_3_6 (K : ℕ) : S (2 ^ (K + 1) - 1) ≤ T K ∧ T K ≤ 2 * S (2 ^ K) :=\n    by\n    induction' K with K hK\n    . simp [S, T, Series.partial, hm, t]; grind\n    observe h2K : 1 ≤ 2 ^ K; observe h2K' : 1 ≤ 2 ^ (K + 1)\n    choose hK1 hK2 using hK\n    have claim1 : T (K + 1) = T K + 2 ^ (K + 1) * s.seq (2 ^ (K + 1)) := by apply t.partial_succ; grind\n    have claim2a : S (2 ^ (K + 1)) ≥ S (2 ^ K) + 2 ^ K * s.seq (2 ^ (K + 1)) :=\n      calc\n        _ = S (2 ^ K) + ∑ n ∈ .Ioc (2 ^ K) (2 ^ (K + 1)), s.seq n :=\n          by\n          have : Disjoint (Finset.Icc s.m (2 ^ K)) (Finset.Ioc (2 ^ K) (2 ^ (K + 1))) := by rw [Finset.disjoint_iff_ne];\n            intro x hx y hy; simp at hx hy; linarith\n          convert Finset.sum_union this\n          ext x; simp; constructor\n          . intro ⟨h1, h2⟩; simp [h1, h2, le_or_gt]\n          rintro (⟨h1, h2⟩ | ⟨h1, h2⟩)\n          . simp [h1, pow_succ']; linarith\n          simp [h2, hm]; grind\n        _ ≥ S (2 ^ K) + ∑ n ∈ .Ioc ((2 : ℤ) ^ K) (2 ^ (K + 1)), s.seq (2 ^ (K + 1)) := by gcongr with n hn; simp at hn;\n          exact hmono' _ (by grind) _ hn.2\n        _ = _ := by simp [pow_succ']; left; ring_nf; norm_cast\n    have claim2 : 2 * S (2 ^ (K + 1)) ≥ 2 * S (2 ^ K) + 2 ^ (K + 1) * s.seq (2 ^ (K + 1)) := by\n      nth_rewrite 2 [pow_succ']; grind\n    have claim3 : S (2 ^ (K + 1 + 1) - 1) ≤ S (2 ^ (K + 1) - 1) + 2 ^ (K + 1) * s.seq (2 ^ (K + 1)) :=\n      calc\n        _ = S (2 ^ (K + 1) - 1) + ∑ n ∈ .Icc (2 ^ (K + 1)) (2 ^ (K + 1 + 1) - 1), s.seq n :=\n          by\n          have : Disjoint (Finset.Icc s.m (2 ^ (K + 1) - 1)) (Finset.Icc (2 ^ (K + 1)) (2 ^ (K + 1 + 1) - 1)) := by\n            rw [Finset.disjoint_iff_ne]; intro x hx y hy; simp at hx hy; linarith\n          convert Finset.sum_union this\n          ext; simp; constructor\n          . intro ⟨h1, h2⟩; simp [h1, h2]; omega\n          rintro (⟨h1, h2⟩ | ⟨h1, h2⟩)\n          . simp [h1, pow_succ' _ (K + 1)]; linarith\n          simp [h2, hm]; linarith\n        _ ≤ S (2 ^ (K + 1) - 1) + ∑ n ∈ .Icc ((2 : ℤ) ^ (K + 1)) (2 ^ (K + 1 + 1) - 1), s.seq (2 ^ (K + 1)) := by\n          gcongr with n hn; simp at hn; apply hmono' _ _ _ hn.1; linarith\n        _ = _ := by simp [pow_succ']; left; ring_nf; norm_cast\n    simp; constructor <;> grind\n  constructor\n  . intro ⟨M, hM⟩; use 2 * M; intro N; obtain hN | hN := lt_or_ge N 0\n    . simp [T, Series.partial, htm, hN]; convert hM 0; simp [S, Series.partial, hm]\n    rw [Int.eq_natCast_toNat.mpr hN]; apply (Lemma_7_3_6 N.toNat).2.trans; grind\n  intro ⟨M, hM⟩; use M; intro K'; obtain hK' | hK' := lt_or_ge K' 1\n  . simp [S, Series.partial, hm, hK']; convert hM (-1)\n  set K := (K' - 1).toNat; have hK : K' = K + 1 := by rw [Int.toNat_of_nonneg (by linarith)]; abel\n  calc\n    _ ≤ S (2 ^ (K + 1) - 1) := by\n      apply partial_of_nonneg hs; rw [hK]\n      generalize K = n; induction' n with n hn; simp\n      simp [pow_succ] at *; linarith\n    _ ≤ T K := (Lemma_7_3_6 K).1\n    _ ≤ M := hM K","original":true},"params":[{"type":[3830,3836],"ref":[3828,3829],"id":[3828,3829],"bi":"implicit"},{"type":[3843,3850],"ref":[3839,3841],"id":[3839,3841],"bi":"default"},{"type":[3856,3864],"ref":[3853,3855],"id":[3853,3855],"bi":"default"},{"type":[3874,3910],"ref":[3867,3872],"id":[3867,3872],"bi":"default"}],"name":["Chapter7","Series","cauchy_criterion"],"modifiers":null,"kind":"theorem","id":{"range":[3803,3826],"original":true}},{"value":{"range":[7490,8353],"original":true},"type":{"range":[7420,7489],"original":true},"signature":{"range":[7397,7489],"pp":" (q : ℝ) (hq : q > 0) : (mk' (m := 1) fun n ↦ 1 / (n : ℝ) ^ q : Series).converges ↔ (q > 1)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[7341,8353],"pp":"/-- Corollary 7.3.7 -/\ntheorem converges_qseries (q : ℝ) (hq : q > 0) : (mk' (m := 1) fun n ↦ 1 / (n : ℝ) ^ q : Series).converges ↔ (q > 1) :=\n  by\n  -- This proof is written to follow the structure of the original text.\n  \n  set s := (mk' (m := 1) fun n ↦ 1 / (n : ℝ) ^ q : Series)\n  have hs : s.nonneg := by intro n; simp [s]; by_cases h : 1 ≤ n <;> simp [h]; positivity\n  have hmono : ∀ n ≥ 1, s.seq (n + 1) ≤ s.seq n := by\n    intro n hn\n    have hn1 : n ≥ 0 := by positivity\n    have hn3 : n.toNat > 0 := by omega\n    simp [s, hn, hn1]\n    apply_rules [inv_anti₀, rpow_le_rpow] <;> try positivity\n    simp\n  rw [cauchy_criterion (by simp [s]) hs hmono]\n  have (n : ℕ) : 2 ^ n * s.seq (2 ^ n) = (2 ^ (1 - q)) ^ n :=\n    by\n    have : 1 ≤ (2 : ℤ) ^ n := by norm_cast; exact Nat.one_le_two_pow\n    simp [s, this]\n    rw [← rpow_neg, mul_comm, ← rpow_add_one, rpow_pow_comm] <;> (try positivity); grind\n  simp [this, converges_geom_iff]\n  rw [abs_of_nonneg, rpow_lt_one_iff_of_pos] <;> try positivity\n  simp","original":true},"params":[{"type":[7401,7404],"ref":[7398,7399],"id":[7398,7399],"bi":"default"},{"type":[7411,7416],"ref":[7407,7409],"id":[7407,7409],"bi":"default"}],"name":["Chapter7","Series","converges_qseries"],"modifiers":null,"kind":"theorem","id":{"range":[7372,7396],"original":true}},{"value":{"range":[8490,9618],"original":true},"type":{"range":[8420,8489],"original":true},"signature":{"range":[8398,8489],"pp":" {q : ℝ} (hq : q > 1) : (mk' (m := 1) fun n ↦ 1 / (n : ℝ) ^ q : Series).sum = riemannZeta q","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[8355,9618],"pp":"/-- Remark 7.3.8 -/\ntheorem zeta_eq {q : ℝ} (hq : q > 1) : (mk' (m := 1) fun n ↦ 1 / (n : ℝ) ^ q : Series).sum = riemannZeta q := by\n  -- `riemannZeta` is defined over the complex numbers, so some preliminary work is needed to specialize to the reals.\n  \n  set L := ∑' n : ℕ, 1 / (n + 1 : ℝ) ^ q\n  have hL : L = riemannZeta q :=\n    by\n    rw [zeta_eq_tsum_one_div_nat_add_one_cpow (by norm_cast)]\n    convert Complex.ofReal_tsum _ with n\n    simp [Complex.ofReal_cpow (x := n + 1) (by positivity) _]\n  rw [← hL]\n  norm_cast; apply sum_of_converges\n  have : Summable (fun (n : ℕ) ↦ 1 / (n + 1 : ℝ) ^ q) :=\n    by\n    convert (summable_one_div_nat_add_rpow 1 q).mpr hq using 4 with n\n    rw [abs_of_nonneg]; positivity\n  have tail (a : ℤ → ℝ) (L : ℝ) : Filter.atTop.Tendsto a (nhds L) ↔ Filter.atTop.Tendsto (fun n : ℕ ↦ a n) (nhds L) :=\n    by\n    convert Filter.tendsto_map'_iff (g := fun n : ℕ ↦ (n : ℤ))\n    simp\n  unfold convergesTo\n  rw [tail _ L]\n  convert Summable.tendsto_sum_tsum_nat this with n\n  simp [Series.partial]\n  set e : ℕ ↪ ℤ :=\n    { toFun n := n + 1\n      inj' _ _ _ := by grind }\n  convert Finset.sum_map _ e _ using 2 with n _ m hm\n  . ext x; simp [e]; constructor\n    . intro ⟨_, _⟩; use (x - 1).toNat; omega\n    grind\n  simp [e]","original":true},"params":[{"type":[8401,8404],"ref":[8399,8400],"id":[8399,8400],"bi":"implicit"},{"type":[8411,8416],"ref":[8407,8409],"id":[8407,8409],"bi":"default"}],"name":["Chapter7","Series","zeta_eq"],"modifiers":null,"kind":"theorem","id":{"range":[8383,8397],"original":true}},{"value":{"range":[9724,9859],"original":true},"type":{"range":[9652,9723],"original":true},"signature":{"range":[9649,9723],"pp":" : (mk' (m := 1) fun n ↦ 1 / (n : ℝ) ^ 2 : Series).sum = Real.pi ^ 2 / 6","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[9620,9859],"pp":"theorem Basel_problem : (mk' (m := 1) fun n ↦ 1 / (n : ℝ) ^ 2 : Series).sum = Real.pi ^ 2 / 6 :=\n  by\n  have := zeta_eq (show 2 > 1 by norm_num)\n  simp [Complex.ofReal_ofNat, riemannZeta_two] at this\n  simpa [← Complex.ofReal_inj]","original":true},"params":[],"name":["Chapter7","Series","Basel_problem"],"modifiers":null,"kind":"theorem","id":{"range":[9628,9648],"original":true}},{"value":{"range":[10024,10035],"original":true},"type":{"range":[9986,10023],"original":true},"signature":{"range":[9914,10023],"pp":" {a : ℕ → ℝ} (ha : (a : Series).nonneg) (hconv : (a : Series).converges) : (a : Series).sum = 0 ↔ ∀ n, a n = 0","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Real"],["Chapter7","Series"],["Chapter7"]],"openDecl":[{"simple":{"namespace":["Real"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":[9861,10035],"pp":"/-- Exercise 7.3.3 -/\ntheorem nonneg_sum_zero {a : ℕ → ℝ} (ha : (a : Series).nonneg) (hconv : (a : Series).converges) :\n    (a : Series).sum = 0 ↔ ∀ n, a n = 0 := by sorry","original":true},"params":[{"type":[9917,9928],"ref":[9915,9916],"id":[9915,9916],"bi":"implicit"},{"type":[9935,9952],"ref":[9931,9933],"id":[9931,9933],"bi":"default"},{"type":[9962,9982],"ref":[9955,9960],"id":[9955,9960],"bi":"default"}],"name":["Chapter7","Series","nonneg_sum_zero"],"modifiers":null,"kind":"theorem","id":{"range":[9891,9913],"original":true}}]
