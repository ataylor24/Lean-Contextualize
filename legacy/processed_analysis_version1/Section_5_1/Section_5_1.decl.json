[{"value":{"range":[1261,1291],"original":true},"type":{"range":[1221,1260],"original":true},"signature":{"range":[1219,1260],"pp":" : CoeFun Sequence (fun _ ↦ ℤ → ℚ)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[1125,1291],"pp":"/-- Sequences can be thought of as functions from ℤ to ℚ. -/\ninstance instCoeFun : CoeFun Sequence (fun _ ↦ ℤ → ℚ) where coe := fun a ↦ a.seq","original":true},"params":[],"name":["Chapter5","Sequence","instCoeFun"],"modifiers":null,"kind":"instance","id":{"range":[1199,1218],"original":true}},{"value":{"range":[1647,1735],"original":true},"type":{"range":[1638,1646],"original":true},"signature":{"range":[1618,1646],"pp":" (a : ℕ → ℚ) : Sequence","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[1293,1735],"pp":"/-- Functions from ℕ to ℚ can be thought of as sequences starting from 0; `ofNatFun` performs this conversion.\n\nThe `coe` attribute allows the delaborator to print `Sequence.ofNatFun f` as `↑f`, which is more concise; you may safely remove this if you prefer the more explicit notation.\n-/\n@[coe]\ndef ofNatFun (a : ℕ → ℚ) : Sequence where\n  n₀ := 0\n  seq n := if n ≥ 0 then a n.toNat else 0\n  vanish := by\n    grind\n      -- Notice how the delaborator prints this as `↑fun x ↦ ↑x ^ 2 : Sequence`.\n      ","original":true},"params":[{"type":[1623,1634],"ref":[1619,1620],"id":[1619,1620],"bi":"default"}],"name":["Chapter5","Sequence","ofNatFun"],"modifiers":null,"kind":"definition","id":{"range":[1600,1617],"original":true}},{"value":{"range":[2063,2095],"original":true},"type":{"range":[2036,2062],"original":true},"signature":{"range":[2034,2062],"pp":" : Coe (ℕ → ℚ) Sequence","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[1853,2095],"pp":"/--\nIf `a : ℕ → ℚ` is used in a context where a `Sequence` is expected, automatically coerce `a` to `Sequence.ofNatFun a` (which will be pretty-printed as `↑a`)\n-/\ninstance : Coe (ℕ → ℚ) Sequence where coe := Sequence.ofNatFun","original":true},"params":[],"name":["Chapter5","instCoeForallNatRatSequence"],"modifiers":null,"kind":"instance","id":{"range":[2025,2033],"original":false}},{"value":{"range":[2172,2267],"original":true},"type":{"range":[2163,2171],"original":true},"signature":{"range":[2117,2171],"pp":" (n₀ : ℤ) (a : { n // n ≥ n₀ } → ℚ) : Sequence","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[2097,2267],"pp":"abbrev mk' (n₀ : ℤ) (a : { n // n ≥ n₀ } → ℚ) : Sequence\n    where\n  n₀ := n₀\n  seq n := if h : n ≥ n₀ then a ⟨n, h⟩ else 0\n  vanish := by grind","original":true},"params":[{"type":[2123,2126],"ref":[2118,2122],"id":[2118,2122],"bi":"default"},{"type":[2132,2159],"ref":[2129,2130],"id":[2129,2130],"bi":"default"}],"name":["Chapter5","Sequence","mk'"],"modifiers":null,"kind":"abbrev","id":{"range":[2104,2116],"original":true}},{"value":{"range":[2401,2412],"original":true},"type":{"range":[2360,2400],"original":true},"signature":{"range":[2292,2400],"pp":" {n n₀ : ℤ} (a : { n // n ≥ n₀ } → ℚ) (h : n ≥ n₀) : (Sequence.mk' n₀ a) n = a ⟨n, h⟩","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[2269,2412],"pp":"theorem eval_mk {n n₀ : ℤ} (a : { n // n ≥ n₀ } → ℚ) (h : n ≥ n₀) : (Sequence.mk' n₀ a) n = a ⟨n, h⟩ := by grind","original":false},"params":[{"type":[2300,2303],"ref":[2293,2294],"id":[2293,2294],"bi":"implicit"},{"type":[2300,2303],"ref":[2295,2299],"id":[2295,2299],"bi":"implicit"},{"type":[2309,2336],"ref":[2306,2307],"id":[2306,2307],"bi":"default"},{"type":[2342,2352],"ref":[2339,2340],"id":[2339,2340],"bi":"default"}],"name":["Chapter5","Sequence","eval_mk"],"modifiers":null,"kind":"theorem","id":{"range":[2275,2291],"original":true}},{"value":{"range":[2494,2509],"original":true},"type":{"range":[2473,2493],"original":true},"signature":{"range":[2446,2493],"pp":" (n : ℕ) (a : ℕ → ℚ) : (a : Sequence) n = a n","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[2414,2509],"pp":"@[simp]\ntheorem eval_coe (n : ℕ) (a : ℕ → ℚ) : (a : Sequence) n = a n := by norm_cast","original":true},"params":[{"type":[2449,2452],"ref":[2447,2448],"id":[2447,2448],"bi":"default"},{"type":[2458,2469],"ref":[2455,2456],"id":[2455,2456],"bi":"default"}],"name":["Chapter5","Sequence","eval_coe"],"modifiers":null,"kind":"theorem","id":{"range":[2428,2445],"original":true}},{"value":{"range":[2627,2642],"original":true},"type":{"range":[2577,2626],"original":true},"signature":{"range":[2550,2626],"pp":" (n : ℤ) (a : ℕ → ℚ) : (a : Sequence) n = if n ≥ 0 then a n.toNat else 0","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[2511,2642],"pp":"@[simp]\ntheorem eval_coe_at_int (n : ℤ) (a : ℕ → ℚ) : (a : Sequence) n = if n ≥ 0 then a n.toNat else 0 := by norm_cast","original":true},"params":[{"type":[2553,2556],"ref":[2551,2552],"id":[2551,2552],"bi":"default"},{"type":[2562,2573],"ref":[2559,2560],"id":[2559,2560],"bi":"default"}],"name":["Chapter5","Sequence","eval_coe_at_int"],"modifiers":null,"kind":"theorem","id":{"range":[2525,2549],"original":true}},{"value":{"range":[2715,2730],"original":true},"type":{"range":[2693,2714],"original":true},"signature":{"range":[2674,2714],"pp":" (a : ℕ → ℚ) : (a : Sequence).n₀ = 0","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[2644,2730],"pp":"@[simp]\ntheorem n0_coe (a : ℕ → ℚ) : (a : Sequence).n₀ = 0 := by norm_cast","original":true},"params":[{"type":[2678,2689],"ref":[2675,2676],"id":[2675,2676],"bi":"default"}],"name":["Chapter5","Sequence","n0_coe"],"modifiers":null,"kind":"theorem","id":{"range":[2658,2673],"original":true}},{"value":{"range":[2788,2827],"original":true},"type":{"range":[2779,2787],"original":true},"signature":{"range":[2777,2787],"pp":" : Sequence","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[2732,2827],"pp":"/-- Example 5.1.2 -/\nabbrev squares : Sequence :=\n  ((fun n : ℕ ↦ (n ^ 2 : ℚ)) : Sequence)","original":true},"params":[],"name":["Chapter5","Sequence","squares"],"modifiers":null,"kind":"abbrev","id":{"range":[2760,2776],"original":true}},{"value":{"range":[2893,2917],"original":true},"type":{"range":[2868,2892],"original":true},"signature":{"range":[2858,2892],"pp":" (n : ℕ) : Sequence.squares n = n ^ 2","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[2829,2917],"pp":"/-- Example 5.1.2 -/\nexample (n : ℕ) : Sequence.squares n = n ^ 2 :=\n  Sequence.eval_coe _ _","original":true},"params":[{"type":[2861,2864],"ref":[2859,2860],"id":[2859,2860],"bi":"default"}],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[2850,2857],"original":false}},{"value":{"range":[2973,3012],"original":true},"type":{"range":[2964,2972],"original":true},"signature":{"range":[2962,2972],"pp":" : Sequence","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[2919,3012],"pp":"/-- Example 5.1.2 -/\nabbrev three : Sequence :=\n  ((fun (_ : ℕ) ↦ (3 : ℚ)) : Sequence)","original":true},"params":[],"name":["Chapter5","Sequence","three"],"modifiers":null,"kind":"abbrev","id":{"range":[2947,2961],"original":true}},{"value":{"range":[3074,3122],"original":true},"type":{"range":[3053,3073],"original":true},"signature":{"range":[3043,3073],"pp":" (n : ℕ) : Sequence.three n = 3","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[3014,3122],"pp":"/-- Example 5.1.2 -/\nexample (n : ℕ) : Sequence.three n = 3 :=\n  Sequence.eval_coe _ (fun (_ : ℕ) ↦ (3 : ℚ))","original":true},"params":[{"type":[3046,3049],"ref":[3044,3045],"id":[3044,3045],"bi":"default"}],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[3035,3042],"original":false}},{"value":{"range":[3191,3206],"original":true},"type":{"range":[3182,3190],"original":true},"signature":{"range":[3180,3190],"pp":" : Sequence","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[3124,3206],"pp":"/-- Example 5.1.2 -/\nabbrev squares_from_three : Sequence :=\n  mk' 3 (· ^ 2)","original":true},"params":[],"name":["Chapter5","Sequence","squares_from_three"],"modifiers":null,"kind":"abbrev","id":{"range":[3152,3179],"original":true}},{"value":{"range":[3297,3321],"original":true},"type":{"range":[3261,3296],"original":true},"signature":{"range":[3237,3296],"pp":" (n : ℤ) (hn : n ≥ 3) : Sequence.squares_from_three n = n ^ 2","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[3208,3321],"pp":"/-- Example 5.1.2 -/\nexample (n : ℤ) (hn : n ≥ 3) : Sequence.squares_from_three n = n ^ 2 :=\n  Sequence.eval_mk _ hn","original":true},"params":[{"type":[3240,3243],"ref":[3238,3239],"id":[3238,3239],"bi":"default"},{"type":[3250,3257],"ref":[3246,3248],"id":[3246,3248],"bi":"default"}],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[3229,3236],"original":false}},{"value":{"range":[3620,3681],"original":true},"type":{"range":[3615,3619],"original":true},"signature":{"range":[3580,3619],"pp":" (ε : ℚ) (a : Chapter5.Sequence) : Prop","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Rat"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Rat"]},"ref":{"range":[3428,3681],"pp":"/-- A slight generalization of Definition 5.1.3 - definition of ε-steadiness for a sequence with an\narbitrary starting point n₀\n-/\nabbrev Steady (ε : ℚ) (a : Chapter5.Sequence) : Prop :=\n  ∀ n ≥ a.n₀, ∀ m ≥ a.n₀, ε.Close (a n) (a m)","original":true},"params":[{"type":[3585,3588],"ref":[3581,3583],"id":[3581,3583],"bi":"default"},{"type":[3594,3611],"ref":[3591,3592],"id":[3591,3592],"bi":"default"}],"name":["Rat","Steady"],"modifiers":null,"kind":"abbrev","id":{"range":[3569,3579],"original":true}},{"value":{"range":[3814,3823],"original":true},"type":{"range":[3741,3813],"original":true},"signature":{"range":[3704,3813],"pp":" (ε : ℚ) (a : Chapter5.Sequence) : ε.Steady a ↔ ∀ n ≥ a.n₀, ∀ m ≥ a.n₀, ε.Close (a n) (a m)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Rat"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Rat"]},"ref":{"range":[3683,3823],"pp":"theorem steady_def (ε : ℚ) (a : Chapter5.Sequence) : ε.Steady a ↔ ∀ n ≥ a.n₀, ∀ m ≥ a.n₀, ε.Close (a n) (a m) := by rfl","original":false},"params":[{"type":[3709,3712],"ref":[3705,3707],"id":[3705,3707],"bi":"default"},{"type":[3718,3735],"ref":[3715,3716],"id":[3715,3716],"bi":"default"}],"name":["Rat","steady_def"],"modifiers":null,"kind":"theorem","id":{"range":[3689,3703],"original":true}},{"value":{"range":[4034,4192],"original":true},"type":{"range":[3982,4033],"original":true},"signature":{"range":[3949,4033],"pp":" (ε : ℚ) (a : ℕ → ℚ) : ε.Steady a ↔ ∀ n m : ℕ, ε.Close (a n) (a m)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Rat","Steady"],["Chapter5","Rat"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Rat","Steady"]},"ref":{"range":[3845,4192],"pp":"/-- Definition 5.1.3 - definition of ε-steadiness for a sequence starting at 0\n-/\ntheorem coe (ε : ℚ) (a : ℕ → ℚ) : ε.Steady a ↔ ∀ n m : ℕ, ε.Close (a n) (a m) :=\n  by\n  constructor\n  · intro h n m; specialize h n ?_ m ?_ <;> simp_all\n  intro h n hn m hm\n  lift n to ℕ using hn\n  lift m to ℕ using hm\n  simp [h n m]","original":true},"params":[{"type":[3955,3958],"ref":[3950,3952],"id":[3950,3952],"bi":"default"},{"type":[3963,3974],"ref":[3961,3962],"id":[3961,3962],"bi":"default"}],"name":["Chapter5","Rat","Steady","coe"],"modifiers":null,"kind":"theorem","id":{"range":[3934,3948],"original":true}},{"value":{"range":[4360,4400],"original":true},"type":{"range":[4310,4359],"original":true},"signature":{"range":[4308,4359],"pp":" : (1 : ℚ).Steady ((fun _ : ℕ ↦ (3 : ℚ)) : Sequence)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[4194,4400],"pp":"/-- Not in textbook: the sequence 3, 3 ... is 1-steady\nIntended as a demonstration of `Rat.Steady.coe`\n-/\nexample : (1 : ℚ).Steady ((fun _ : ℕ ↦ (3 : ℚ)) : Sequence) := by simp [Rat.Steady.coe, Rat.Close]","original":true},"params":[],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[4300,4307],"original":false}},{"value":{"range":[4639,4725],"original":true},"type":{"range":[4589,4638],"original":true},"signature":{"range":[4587,4638],"pp":" : (1 : ℚ).Steady ((fun _ : ℕ ↦ (3 : ℚ)) : Sequence)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[4402,4725],"pp":"/-- Compare: if you need to work with `Rat.Steady` on the coercion directly, there will be side\nconditions `hn : n ≥ 0` and `hm : m ≥ 0` that you will need to deal with.\n-/\nexample : (1 : ℚ).Steady ((fun _ : ℕ ↦ (3 : ℚ)) : Sequence) := by intro n _ m _;\n  simp_all [Sequence.n0_coe, Sequence.eval_coe_at_int, Rat.Close]","original":true},"params":[],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[4579,4586],"original":false}},{"value":{"range":[4881,5079],"original":true},"type":{"range":[4803,4880],"original":true},"signature":{"range":[4801,4880],"pp":" : (1 : ℚ).Steady ((fun n : ℕ ↦ if Even n then (1 : ℚ) else (0 : ℚ)) : Sequence)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[4727,5079],"pp":"/-- Example 5.1.5: The sequence `1, 0, 1, 0, ...` is 1-steady.\n-/\nexample : (1 : ℚ).Steady ((fun n : ℕ ↦ if Even n then (1 : ℚ) else (0 : ℚ)) : Sequence) :=\n  by\n  rw [Rat.Steady.coe]\n  intro n m\n  split_ifs <;> simp [Rat.Close]","original":true},"params":[],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[4793,4800],"original":false}},{"value":{"range":[5245,5343],"original":true},"type":{"range":[5162,5244],"original":true},"signature":{"range":[5160,5244],"pp":" : ¬(0.5 : ℚ).Steady ((fun n : ℕ ↦ if Even n then (1 : ℚ) else (0 : ℚ)) : Sequence)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[5081,5343],"pp":"/-- Example 5.1.5: The sequence `1, 0, 1, 0, ...` is not ½-steady.\n-/\nexample : ¬(0.5 : ℚ).Steady ((fun n : ℕ ↦ if Even n then (1 : ℚ) else (0 : ℚ)) : Sequence) :=\n  by\n  rw [Rat.Steady.coe]\n  by_contra h; specialize h 0 1; simp [Rat.Close] at h\n  norm_num at h","original":true},"params":[],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[5152,5159],"original":false}},{"value":{"range":[5496,5856],"original":true},"type":{"range":[5427,5495],"original":true},"signature":{"range":[5425,5495],"pp":" : (0.1 : ℚ).Steady ((fun n : ℕ ↦ (10 : ℚ) ^ (-(n : ℤ) - 1)) : Sequence)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[5345,5856],"pp":"/-- Example 5.1.5: The sequence 0.1, 0.01, 0.001, ... is 0.1-steady.\n-/\nexample : (0.1 : ℚ).Steady ((fun n : ℕ ↦ (10 : ℚ) ^ (-(n : ℤ) - 1)) : Sequence) :=\n  by\n  rw [Rat.Steady.coe]\n  intro n m; unfold Rat.Close\n  wlog h : m ≤ n\n  · specialize this m n (by linarith); rwa [abs_sub_comm]\n  rw [abs_sub_comm, abs_of_nonneg]\n  . rw [show (0.1 : ℚ) = (10 : ℚ) ^ (-1 : ℤ) - 0 by norm_num]\n    gcongr <;> try grind\n    positivity\n  linarith [show (10 : ℚ) ^ (-(n : ℤ) - 1) ≤ (10 : ℚ) ^ (-(m : ℤ) - 1) by gcongr; norm_num]","original":true},"params":[],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[5417,5424],"original":false}},{"value":{"range":[6038,6049],"original":true},"type":{"range":[5966,6037],"original":true},"signature":{"range":[5964,6037],"pp":" : ¬(0.01 : ℚ).Steady ((fun n : ℕ ↦ (10 : ℚ) ^ (-(n : ℤ) - 1)) : Sequence)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[5858,6049],"pp":"/-- Example 5.1.5: The sequence 0.1, 0.01, 0.001, ... is not 0.01-steady. Left as an exercise.\n-/\nexample : ¬(0.01 : ℚ).Steady ((fun n : ℕ ↦ (10 : ℚ) ^ (-(n : ℤ) - 1)) : Sequence) := by sorry","original":true},"params":[],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[5956,5963],"original":false}},{"value":{"range":[6228,6239],"original":true},"type":{"range":[6171,6227],"original":true},"signature":{"range":[6160,6227],"pp":" (ε : ℚ) : ¬ε.Steady ((fun n : ℕ ↦ (2 ^ (n + 1) : ℚ)) : Sequence)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[6051,6239],"pp":"/-- Example 5.1.5: The sequence 1, 2, 4, 8, ... is not ε-steady for any ε. Left as an exercise.\n-/\nexample (ε : ℚ) : ¬ε.Steady ((fun n : ℕ ↦ (2 ^ (n + 1) : ℚ)) : Sequence) := by sorry","original":true},"params":[{"type":[6164,6167],"ref":[6161,6163],"id":[6161,6163],"bi":"default"}],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[6152,6159],"original":false}},{"value":{"range":[6394,6451],"original":true},"type":{"range":[6348,6393],"original":true},"signature":{"range":[6325,6393],"pp":" (ε : ℚ) (hε : ε > 0) : ε.Steady ((fun _ : ℕ ↦ (2 : ℚ)) : Sequence)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[6241,6451],"pp":"/-- Example 5.1.5:The sequence 2, 2, 2, ... is ε-steady for any ε > 0.\n-/\nexample (ε : ℚ) (hε : ε > 0) : ε.Steady ((fun _ : ℕ ↦ (2 : ℚ)) : Sequence) := by rw [Rat.Steady.coe]; simp [Rat.Close];\n  positivity","original":true},"params":[{"type":[6329,6332],"ref":[6326,6328],"id":[6326,6328],"bi":"default"},{"type":[6340,6344],"ref":[6335,6338],"id":[6335,6338],"bi":"default"}],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[6317,6324],"original":false}},{"value":{"range":[6590,6723],"original":true},"type":{"range":[6511,6589],"original":true},"signature":{"range":[6509,6589],"pp":" : (10 : ℚ).Steady ((fun n : ℕ ↦ if n = 0 then (10 : ℚ) else (0 : ℚ)) : Sequence)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[6453,6723],"pp":"/-- The sequence 10, 0, 0, ... is 10-steady.\n-/\nexample : (10 : ℚ).Steady ((fun n : ℕ ↦ if n = 0 then (10 : ℚ) else (0 : ℚ)) : Sequence) :=\n  by\n  rw [Rat.Steady.coe]; intro n m\n  split_ifs <;> simp [Rat.Close]","original":true},"params":[],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[6501,6508],"original":false}},{"value":{"range":[6912,7012],"original":true},"type":{"range":[6836,6911],"original":true},"signature":{"range":[6813,6911],"pp":" (ε : ℚ) (hε : ε < 10) : ¬ε.Steady ((fun n : ℕ ↦ if n = 0 then (10 : ℚ) else (0 : ℚ)) : Sequence)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[6725,7012],"pp":"/-- The sequence 10, 0, 0, ... is not ε-steady for any smaller value of ε.\n-/\nexample (ε : ℚ) (hε : ε < 10) : ¬ε.Steady ((fun n : ℕ ↦ if n = 0 then (10 : ℚ) else (0 : ℚ)) : Sequence) := by\n  contrapose! hε; rw [Rat.Steady.coe] at hε; specialize hε 0 1; simpa [Rat.Close] using hε","original":true},"params":[{"type":[6817,6820],"ref":[6814,6816],"id":[6814,6816],"bi":"default"},{"type":[6827,6832],"ref":[6823,6826],"id":[6823,6826],"bi":"default"}],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[6805,6812],"original":false}},{"value":{"range":[7241,7289],"original":true},"type":{"range":[7232,7240],"original":true},"signature":{"range":[7206,7240],"pp":" (a : Sequence) (n₁ : ℤ) : Sequence","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[7014,7289],"pp":"/-- a.from n₁ starts `a:Sequence` from `n₁`.  It is intended for use when `n₁ ≥ n₀`, but returns\n  the \"junk\" value of the original sequence `a` otherwise.\n-/\nabbrev «from» (a : Sequence) (n₁ : ℤ) : Sequence :=\n  mk' (max a.n₀ n₁) (fun n ↦ a (n : ℤ))","original":true},"params":[{"type":[7209,7217],"ref":[7207,7208],"id":[7207,7208],"bi":"default"},{"type":[7225,7228],"ref":[7220,7224],"id":[7220,7224],"bi":"default"}],"name":["Chapter5","Sequence","from"],"modifiers":null,"kind":"abbrev","id":{"range":[7192,7205],"original":true}},{"value":{"range":[7385,7436],"original":true},"type":{"range":[7363,7384],"original":true},"signature":{"range":[7316,7384],"pp":" (a : Sequence) {n₁ n : ℤ} (hn : n ≥ n₁) : (a.from n₁) n = a n","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[7291,7436],"pp":"theorem from_eval (a : Sequence) {n₁ n : ℤ} (hn : n ≥ n₁) : (a.from n₁) n = a n := by simp [hn]; intro h;\n  exact (a.vanish _ h).symm","original":false},"params":[{"type":[7319,7327],"ref":[7317,7318],"id":[7317,7318],"bi":"default"},{"type":[7337,7340],"ref":[7330,7334],"id":[7330,7334],"bi":"implicit"},{"type":[7337,7340],"ref":[7335,7336],"id":[7335,7336],"bi":"implicit"},{"type":[7347,7357],"ref":[7343,7345],"id":[7343,7345],"bi":"default"}],"name":["Chapter5","Sequence","from_eval"],"modifiers":null,"kind":"theorem","id":{"range":[7297,7315],"original":true}},{"value":{"range":[7567,7608],"original":true},"type":{"range":[7562,7566],"original":true},"signature":{"range":[7527,7566],"pp":" (ε : ℚ) (a : Chapter5.Sequence) : Prop","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Rat"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Rat"]},"ref":{"range":[7452,7608],"pp":"/-- Definition 5.1.6 (Eventually ε-steady) -/\nabbrev EventuallySteady (ε : ℚ) (a : Chapter5.Sequence) : Prop :=\n  ∃ N ≥ a.n₀, ε.Steady (a.from N)","original":true},"params":[{"type":[7532,7535],"ref":[7528,7530],"id":[7528,7530],"bi":"default"},{"type":[7541,7558],"ref":[7538,7539],"id":[7538,7539],"bi":"default"}],"name":["Rat","EventuallySteady"],"modifiers":null,"kind":"abbrev","id":{"range":[7506,7526],"original":true}},{"value":{"range":[7743,7752],"original":true},"type":{"range":[7678,7742],"original":true},"signature":{"range":[7641,7742],"pp":" (ε : ℚ) (a : Chapter5.Sequence) : ε.EventuallySteady a ↔ ∃ N ≥ a.n₀, ε.Steady (a.from N)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Rat"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Rat"]},"ref":{"range":[7610,7752],"pp":"theorem eventuallySteady_def (ε : ℚ) (a : Chapter5.Sequence) : ε.EventuallySteady a ↔ ∃ N ≥ a.n₀, ε.Steady (a.from N) :=\n  by rfl","original":false},"params":[{"type":[7646,7649],"ref":[7642,7644],"id":[7642,7644],"bi":"default"},{"type":[7655,7672],"ref":[7652,7653],"id":[7652,7653],"bi":"default"}],"name":["Rat","eventuallySteady_def"],"modifiers":null,"kind":"theorem","id":{"range":[7616,7640],"original":true}},{"value":{"range":[7935,8068],"original":true},"type":{"range":[7872,7934],"original":true},"signature":{"range":[7870,7934],"pp":" : ¬(0.1 : ℚ).Steady ((fun n : ℕ ↦ (n + 1 : ℚ)⁻¹) : Sequence)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[7774,8068],"pp":"/-- Example 5.1.7: The sequence 1, 1/2, 1/3, ... is not 0.1-steady\n-/\ntheorem ex_5_1_7_a : ¬(0.1 : ℚ).Steady ((fun n : ℕ ↦ (n + 1 : ℚ)⁻¹) : Sequence) :=\n  by\n  intro h; rw [Rat.Steady.coe] at h; specialize h 0 2; simp [Rat.Close] at h; norm_num at h\n  rw [abs_of_nonneg] at h <;> grind","original":true},"params":[],"name":["Chapter5","Sequence","ex_5_1_7_a"],"modifiers":null,"kind":"theorem","id":{"range":[7850,7869],"original":true}},{"value":{"range":[8239,8690],"original":true},"type":{"range":[8169,8238],"original":true},"signature":{"range":[8167,8238],"pp":" : (0.1 : ℚ).Steady (((fun n : ℕ ↦ (n + 1 : ℚ)⁻¹) : Sequence).from 10)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[8070,8690],"pp":"/-- Example 5.1.7: The sequence a_10, a_11, a_12, ... is 0.1-steady\n-/\ntheorem ex_5_1_7_b : (0.1 : ℚ).Steady (((fun n : ℕ ↦ (n + 1 : ℚ)⁻¹) : Sequence).from 10) :=\n  by\n  rw [Rat.Steady]\n  intro n hn m hm; simp at hn hm\n  lift n to ℕ using (by omega)\n  lift m to ℕ using (by omega)\n  simp_all [Rat.Close]\n  wlog h : m ≤ n\n  · specialize this m n _ _ _ <;> try omega\n    rwa [abs_sub_comm] at this\n  rw [abs_sub_comm]\n  have : ((n : ℚ) + 1)⁻¹ ≤ ((m : ℚ) + 1)⁻¹ := by gcongr\n  rw [abs_of_nonneg (by linarith), show (0.1 : ℚ) = (10 : ℚ)⁻¹ - 0 by norm_num]\n  gcongr\n  · norm_cast; omega\n  positivity","original":true},"params":[],"name":["Chapter5","Sequence","ex_5_1_7_b"],"modifiers":null,"kind":"theorem","id":{"range":[8147,8166],"original":true}},{"value":{"range":[8867,8901],"original":true},"type":{"range":[8797,8866],"original":true},"signature":{"range":[8795,8866],"pp":" : (0.1 : ℚ).EventuallySteady ((fun n : ℕ ↦ (n + 1 : ℚ)⁻¹) : Sequence)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[8692,8901],"pp":"/-- Example 5.1.7: The sequence 1, 1/2, 1/3, ... is eventually 0.1-steady\n-/\ntheorem ex_5_1_7_c : (0.1 : ℚ).EventuallySteady ((fun n : ℕ ↦ (n + 1 : ℚ)⁻¹) : Sequence) :=\n  ⟨10, by simp, ex_5_1_7_b⟩","original":true},"params":[],"name":["Chapter5","Sequence","ex_5_1_7_c"],"modifiers":null,"kind":"theorem","id":{"range":[8775,8794],"original":true}},{"value":{"range":[9149,9160],"original":true},"type":{"range":[9067,9148],"original":true},"signature":{"range":[9041,9148],"pp":" {ε : ℚ} (hε : ε > 0) : ε.EventuallySteady ((fun n : ℕ ↦ if n = 0 then (10 : ℚ) else (0 : ℚ)) : Sequence)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[8903,9160],"pp":"/-- Example 5.1.7\n\nThe sequence 10, 0, 0, ... is eventually ε-steady for every ε > 0. Left as an exercise.\n-/\ntheorem ex_5_1_7_d {ε : ℚ} (hε : ε > 0) :\n    ε.EventuallySteady ((fun n : ℕ ↦ if n = 0 then (10 : ℚ) else (0 : ℚ)) : Sequence) := by sorry","original":true},"params":[{"type":[9045,9048],"ref":[9042,9044],"id":[9042,9044],"bi":"implicit"},{"type":[9055,9059],"ref":[9051,9054],"id":[9051,9054],"bi":"default"}],"name":["Chapter5","Sequence","ex_5_1_7_d"],"modifiers":null,"kind":"theorem","id":{"range":[9021,9040],"original":true}},{"value":{"range":[9207,9249],"original":true},"type":{"range":[9202,9206],"original":true},"signature":{"range":[9187,9206],"pp":" (a : Sequence) : Prop","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[9162,9249],"pp":"abbrev IsCauchy (a : Sequence) : Prop :=\n  ∀ ε > (0 : ℚ), ε.EventuallySteady a","original":true},"params":[{"type":[9190,9198],"ref":[9188,9189],"id":[9188,9189],"bi":"default"}],"name":["Chapter5","Sequence","IsCauchy"],"modifiers":null,"kind":"abbrev","id":{"range":[9169,9186],"original":true}},{"value":{"range":[9351,9360],"original":true},"type":{"range":[9296,9350],"original":true},"signature":{"range":[9279,9350],"pp":" (a : Sequence) : a.IsCauchy ↔ ∀ ε > (0 : ℚ), ε.EventuallySteady a","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[9251,9360],"pp":"theorem isCauchy_def (a : Sequence) : a.IsCauchy ↔ ∀ ε > (0 : ℚ), ε.EventuallySteady a := by rfl","original":false},"params":[{"type":[9282,9290],"ref":[9280,9281],"id":[9280,9281],"bi":"default"}],"name":["Chapter5","Sequence","isCauchy_def"],"modifiers":null,"kind":"theorem","id":{"range":[9257,9278],"original":true}},{"value":{"range":[9597,10094],"original":true},"type":{"range":[9480,9596],"original":true},"signature":{"range":[9458,9596],"pp":" (a : ℕ → ℚ) : (a : Sequence).IsCauchy ↔ ∀ ε > (0 : ℚ), ∃ N, ∀ j ≥ N, ∀ k ≥ N, Section_4_3.dist (a j) (a k) ≤ ε","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence","IsCauchy"],["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence","IsCauchy"]},"ref":{"range":[9362,10094],"pp":"/-- Definition of Cauchy sequences, for a sequence starting at 0 -/\ntheorem coe (a : ℕ → ℚ) :\n    (a : Sequence).IsCauchy ↔ ∀ ε > (0 : ℚ), ∃ N, ∀ j ≥ N, ∀ k ≥ N, Section_4_3.dist (a j) (a k) ≤ ε :=\n  by\n  constructor <;> intro h ε hε\n  · choose N hN h' using h ε hε\n    lift N to ℕ using hN; use N\n    intro j _ k _; simp [Rat.steady_def] at h'; specialize h' j _ k _ <;> try omega\n    simp_all; exact h'\n  choose N h' using h ε hε\n  refine ⟨max N 0, by simp, ?_⟩\n  intro n hn m hm; simp at hn hm\n  have npos : 0 ≤ n := ?_\n  have mpos : 0 ≤ m := ?_\n  lift n to ℕ using npos\n  lift m to ℕ using mpos\n  simp [hn, hm]; specialize h' n _ m _\n  all_goals try omega\n  norm_cast","original":true},"params":[{"type":[9461,9472],"ref":[9459,9460],"id":[9459,9460],"bi":"default"}],"name":["Chapter5","Sequence","IsCauchy","coe"],"modifiers":null,"kind":"theorem","id":{"range":[9436,9457],"original":true}},{"value":{"range":[10315,10721],"original":true},"type":{"range":[10171,10314],"original":true},"signature":{"range":[10123,10314],"pp":" {n₀ : ℤ} (a : { n // n ≥ n₀ } → ℚ) :\n  (mk' n₀ a).IsCauchy ↔ ∀ ε > (0 : ℚ), ∃ N ≥ n₀, ∀ j ≥ N, ∀ k ≥ N, Section_4_3.dist (mk' n₀ a j) (mk' n₀ a k) ≤ ε","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence","IsCauchy"],["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence","IsCauchy"]},"ref":{"range":[10096,10721],"pp":"theorem mk {n₀ : ℤ} (a : { n // n ≥ n₀ } → ℚ) :\n    (mk' n₀ a).IsCauchy ↔ ∀ ε > (0 : ℚ), ∃ N ≥ n₀, ∀ j ≥ N, ∀ k ≥ N, Section_4_3.dist (mk' n₀ a j) (mk' n₀ a k) ≤ ε :=\n  by\n  constructor <;> intro h ε hε <;> choose N hN h' using h ε hε\n  · refine ⟨N, hN, ?_⟩; dsimp at hN; intro j _ k _\n    simp only [Rat.Steady, show max n₀ N = N by omega] at h'\n    specialize h' j _ k _ <;> try omega\n    simp_all [show n₀ ≤ j by omega, show n₀ ≤ k by omega]\n    exact h'\n  refine ⟨max n₀ N, by simp, ?_⟩\n  intro n _ m _; simp_all\n  apply h' n _ m <;> omega","original":false},"params":[{"type":[10129,10132],"ref":[10124,10128],"id":[10124,10128],"bi":"implicit"},{"type":[10138,10163],"ref":[10135,10136],"id":[10135,10136],"bi":"default"}],"name":["Chapter5","Sequence","IsCauchy","mk"],"modifiers":null,"kind":"theorem","id":{"range":[10102,10122],"original":true}},{"value":{"range":[10770,10830],"original":true},"type":{"range":[10761,10769],"original":true},"signature":{"range":[10759,10769],"pp":" : Sequence","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[10723,10830],"pp":"noncomputable def sqrt_two : Sequence :=\n  (fun n : ℕ ↦ ((⌊(Real.sqrt 2) * 10 ^ n⌋ / 10 ^ n) : ℚ))","original":true},"params":[],"name":["Chapter5","Sequence","sqrt_two"],"modifiers":null,"kind":"definition","id":{"range":[10741,10758],"original":true}},{"value":{"range":[10991,11002],"original":true},"type":{"range":[10967,10990],"original":true},"signature":{"range":[10965,10990],"pp":" : (1 : ℚ).Steady sqrt_two","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[10832,11002],"pp":"/-- Example 5.1.10. (This requires extensive familiarity with Mathlib's API for the real numbers.)\n-/\ntheorem ex_5_1_10_a : (1 : ℚ).Steady sqrt_two := by sorry","original":true},"params":[],"name":["Chapter5","Sequence","ex_5_1_10_a"],"modifiers":null,"kind":"theorem","id":{"range":[10944,10964],"original":true}},{"value":{"range":[11174,11185],"original":true},"type":{"range":[11139,11173],"original":true},"signature":{"range":[11137,11173],"pp":" : (0.1 : ℚ).Steady (sqrt_two.from 1)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[11004,11185],"pp":"/-- Example 5.1.10. (This requires extensive familiarity with Mathlib's API for the real numbers.)\n-/\ntheorem ex_5_1_10_b : (0.1 : ℚ).Steady (sqrt_two.from 1) := by sorry","original":true},"params":[],"name":["Chapter5","Sequence","ex_5_1_10_b"],"modifiers":null,"kind":"theorem","id":{"range":[11116,11136],"original":true}},{"value":{"range":[11254,11265],"original":true},"type":{"range":[11218,11253],"original":true},"signature":{"range":[11216,11253],"pp":" : (0.1 : ℚ).EventuallySteady sqrt_two","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[11187,11265],"pp":"theorem ex_5_1_10_c : (0.1 : ℚ).EventuallySteady sqrt_two := by sorry","original":true},"params":[],"name":["Chapter5","Sequence","ex_5_1_10_c"],"modifiers":null,"kind":"theorem","id":{"range":[11195,11215],"original":true}},{"value":{"range":[11453,12491],"original":true},"type":{"range":[11414,11452],"original":true},"signature":{"range":[11412,11452],"pp":" : (mk' 1 (fun n ↦ (1 : ℚ) / n)).IsCauchy","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence","IsCauchy"],["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence","IsCauchy"]},"ref":{"range":[11268,12491],"pp":"/-- Proposition 5.1.11. The harmonic sequence, defined as a₁ = 1, a₂ = 1/2, ... is a Cauchy sequence. -/\ntheorem harmonic : (mk' 1 (fun n ↦ (1 : ℚ) / n)).IsCauchy :=\n  by\n  rw [IsCauchy.mk]\n  intro ε hε\n  obtain ⟨N, hN : N > 1 / ε⟩ := exists_nat_gt (1 / ε)\n  have hN' : N > 0 := by\n    observe : (1 / ε) > 0\n    observe : (N : ℚ) > 0\n    norm_cast at this\n  refine ⟨N, by norm_cast, ?_⟩\n  intro j hj k hk\n  lift j to ℕ using (by linarith)\n  lift k to ℕ using (by linarith)\n  norm_cast at hj hk\n  simp [show j ≥ 1 by linarith, show k ≥ 1 by linarith]\n  have hdist : Section_4_3.dist ((1 : ℚ) / j) ((1 : ℚ) / k) ≤ (1 : ℚ) / N :=\n    by\n    rw [Section_4_3.dist_eq, abs_le']\n      /-\n          We establish the following bounds:\n          - 1/j ∈ [0, 1/N]\n          - 1/k ∈ [0, 1/N]\n          These imply that the distance between 1/j and 1/k is at most 1/N - when they are as \"far apart\" as possible.\n          -/\n      \n    have : 1 / j ≤ (1 : ℚ) / N := by gcongr\n    observe : (0 : ℚ) ≤ 1 / j\n    have : 1 / k ≤ (1 : ℚ) / N := by gcongr\n    observe : (0 : ℚ) ≤ 1 / k\n    grind\n  simp at *; apply hdist.trans\n  rw [inv_le_comm₀] <;> try positivity\n  order","original":true},"params":[],"name":["Chapter5","Sequence","IsCauchy","harmonic"],"modifiers":null,"kind":"theorem","id":{"range":[11385,11411],"original":true}},{"value":{"range":[12552,12573],"original":true},"type":{"range":[12547,12551],"original":true},"signature":{"range":[12510,12551],"pp":" {n : ℕ} (a : Fin n → ℚ) (M : ℚ) : Prop","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[12493,12573],"pp":"abbrev BoundedBy {n : ℕ} (a : Fin n → ℚ) (M : ℚ) : Prop :=\n  ∀ i, |a i| ≤ M","original":true},"params":[{"type":[12513,12516],"ref":[12511,12512],"id":[12511,12512],"bi":"implicit"},{"type":[12522,12535],"ref":[12519,12520],"id":[12519,12520],"bi":"default"},{"type":[12540,12543],"ref":[12538,12539],"id":[12538,12539],"bi":"default"}],"name":["Chapter5","BoundedBy"],"modifiers":null,"kind":"abbrev","id":{"range":[12500,12509],"original":true}},{"value":{"range":[12806,12815],"original":true},"type":{"range":[12769,12805],"original":true},"signature":{"range":[12732,12805],"pp":" {n : ℕ} (a : Fin n → ℚ) (M : ℚ) : BoundedBy a M ↔ ∀ i, |a i| ≤ M","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[12575,12815],"pp":"/-- Definition 5.1.12 (bounded sequences). Here we start sequences from 0 rather than 1 to align\n  better with Mathlib conventions.\n-/\ntheorem boundedBy_def {n : ℕ} (a : Fin n → ℚ) (M : ℚ) : BoundedBy a M ↔ ∀ i, |a i| ≤ M := by rfl","original":true},"params":[{"type":[12735,12738],"ref":[12733,12734],"id":[12733,12734],"bi":"implicit"},{"type":[12744,12757],"ref":[12741,12742],"id":[12741,12742],"bi":"default"},{"type":[12762,12765],"ref":[12760,12761],"id":[12760,12761],"bi":"default"}],"name":["Chapter5","boundedBy_def"],"modifiers":null,"kind":"theorem","id":{"range":[12718,12731],"original":true}},{"value":{"range":[12871,12892],"original":true},"type":{"range":[12866,12870],"original":true},"signature":{"range":[12843,12870],"pp":" (a : Sequence) (M : ℚ) : Prop","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[12817,12892],"pp":"abbrev BoundedBy (a : Sequence) (M : ℚ) : Prop :=\n  ∀ n, |a n| ≤ M","original":true},"params":[{"type":[12846,12854],"ref":[12844,12845],"id":[12844,12845],"bi":"default"},{"type":[12859,12862],"ref":[12857,12858],"id":[12857,12858],"bi":"default"}],"name":["Chapter5","Sequence","BoundedBy"],"modifiers":null,"kind":"abbrev","id":{"range":[12824,12842],"original":true}},{"value":{"range":[13028,13037],"original":true},"type":{"range":[12991,13027],"original":true},"signature":{"range":[12968,13027],"pp":" (a : Sequence) (M : ℚ) : a.BoundedBy M ↔ ∀ n, |a n| ≤ M","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[12894,13037],"pp":"/-- Definition 5.1.12 (bounded sequences) -/\ntheorem boundedBy_def (a : Sequence) (M : ℚ) : a.BoundedBy M ↔ ∀ n, |a n| ≤ M := by rfl","original":true},"params":[{"type":[12971,12979],"ref":[12969,12970],"id":[12969,12970],"bi":"default"},{"type":[12984,12987],"ref":[12982,12983],"id":[12982,12983],"bi":"default"}],"name":["Chapter5","Sequence","boundedBy_def"],"modifiers":null,"kind":"theorem","id":{"range":[12945,12967],"original":true}},{"value":{"range":[13085,13114],"original":true},"type":{"range":[13080,13084],"original":true},"signature":{"range":[13065,13084],"pp":" (a : Sequence) : Prop","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[13039,13114],"pp":"abbrev IsBounded (a : Sequence) : Prop :=\n  ∃ M ≥ 0, a.BoundedBy M","original":true},"params":[{"type":[13068,13076],"ref":[13066,13067],"id":[13066,13067],"bi":"default"}],"name":["Chapter5","Sequence","IsBounded"],"modifiers":null,"kind":"abbrev","id":{"range":[13046,13064],"original":true}},{"value":{"range":[13248,13257],"original":true},"type":{"range":[13205,13247],"original":true},"signature":{"range":[13190,13247],"pp":" (a : Sequence) : a.IsBounded ↔ ∃ M ≥ 0, a.BoundedBy M","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[13116,13257],"pp":"/-- Definition 5.1.12 (bounded sequences) -/\ntheorem isBounded_def (a : Sequence) : a.IsBounded ↔ ∃ M ≥ 0, a.BoundedBy M := by rfl","original":true},"params":[{"type":[13193,13201],"ref":[13191,13192],"id":[13191,13192],"bi":"default"}],"name":["Chapter5","Sequence","isBounded_def"],"modifiers":null,"kind":"theorem","id":{"range":[13167,13189],"original":true}},{"value":{"range":[13316,13355],"original":true},"type":{"range":[13291,13315],"original":true},"signature":{"range":[13289,13315],"pp":" : BoundedBy ![1, -2, 3, -4] 4","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[13259,13355],"pp":"/-- Example 5.1.13 -/\nexample : BoundedBy ![1, -2, 3, -4] 4 := by intro i; fin_cases i <;> norm_num","original":true},"params":[],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[13281,13288],"original":false}},{"value":{"range":[13447,13458],"original":true},"type":{"range":[13389,13446],"original":true},"signature":{"range":[13387,13446],"pp":" : ¬((fun n : ℕ ↦ (-1) ^ n * (n + 1 : ℚ)) : Sequence).IsBounded","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[13357,13458],"pp":"/-- Example 5.1.13 -/\nexample : ¬((fun n : ℕ ↦ (-1) ^ n * (n + 1 : ℚ)) : Sequence).IsBounded := by sorry","original":true},"params":[],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[13379,13386],"original":false}},{"value":{"range":[13540,13624],"original":true},"type":{"range":[13492,13539],"original":true},"signature":{"range":[13490,13539],"pp":" : ((fun n : ℕ ↦ (-1 : ℚ) ^ n) : Sequence).IsBounded","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[13460,13624],"pp":"/-- Example 5.1.13 -/\nexample : ((fun n : ℕ ↦ (-1 : ℚ) ^ n) : Sequence).IsBounded := by refine ⟨1, by norm_num, ?_⟩; intro i;\n  by_cases h : 0 ≤ i <;> simp [h]","original":true},"params":[],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[13482,13489],"original":false}},{"value":{"range":[13707,14104],"original":true},"type":{"range":[13658,13706],"original":true},"signature":{"range":[13656,13706],"pp":" : ¬((fun n : ℕ ↦ (-1 : ℚ) ^ n) : Sequence).IsCauchy","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5"]},"ref":{"range":[13626,14104],"pp":"/-- Example 5.1.13 -/\nexample : ¬((fun n : ℕ ↦ (-1 : ℚ) ^ n) : Sequence).IsCauchy :=\n  by\n  rw [Sequence.IsCauchy.coe]\n  by_contra h; specialize h (1 / 2 : ℚ) (by norm_num)\n  choose N h using h; specialize h N _ (N + 1) _ <;> try omega\n  by_cases h' : Even N\n  · simp [h'.neg_one_pow, (h'.add_one).neg_one_pow, Section_4_3.dist] at h\n    norm_num at h\n  observe h₁ : Odd N\n  observe h₂ : Even (N + 1)\n  simp [h₁.neg_one_pow, h₂.neg_one_pow, Section_4_3.dist] at h\n  norm_num at h","original":true},"params":[],"name":["Chapter5","_example"],"modifiers":null,"kind":"example","id":{"range":[13648,13655],"original":false}},{"value":{"range":[14206,14732],"original":true},"type":{"range":[14178,14205],"original":true},"signature":{"range":[14149,14205],"pp":" {n : ℕ} (a : Fin n → ℚ) : ∃ M ≥ 0, BoundedBy a M","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","IsBounded"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","IsBounded"]},"ref":{"range":[14106,14732],"pp":"/-- Lemma 5.1.14 -/\ntheorem finite {n : ℕ} (a : Fin n → ℚ) : ∃ M ≥ 0, BoundedBy a M := by\n  -- this proof is written to follow the structure of the original text.\n  \n  induction' n with n hn\n  . use 0; simp\n  set a' : Fin n → ℚ := fun m ↦ a m.castSucc\n  choose M hpos hM using hn a'\n  have h1 : BoundedBy a' (M + |a (Fin.ofNat _ n)|) := fun m ↦ (hM m).trans (by simp)\n  have h2 : |a (Fin.ofNat _ n)| ≤ M + |a (Fin.ofNat _ n)| := by simp [hpos]\n  refine ⟨M + |a (Fin.ofNat _ n)|, by positivity, ?_⟩\n  intro m; obtain ⟨j, rfl⟩ | rfl := Fin.eq_castSucc_or_eq_last m\n  . grind\n  convert h2; simp","original":true},"params":[{"type":[14152,14155],"ref":[14150,14151],"id":[14150,14151],"bi":"implicit"},{"type":[14161,14174],"ref":[14158,14159],"id":[14158,14159],"bi":"default"}],"name":["Chapter5","IsBounded","finite"],"modifiers":null,"kind":"theorem","id":{"range":[14132,14148],"original":true}},{"value":{"range":[14882,14895],"original":true},"type":{"range":[14870,14881],"original":true},"signature":{"range":[14839,14881],"pp":" {a : Sequence} (h : a.IsCauchy) : a.IsBounded","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[14734,14895],"pp":"/-- Lemma 5.1.15 (Cauchy sequences are bounded) / Exercise 5.1.1 -/\ntheorem isBounded_of_isCauchy {a : Sequence} (h : a.IsCauchy) : a.IsBounded := by sorry","original":true},"params":[{"type":[14842,14850],"ref":[14840,14841],"id":[14840,14841],"bi":"implicit"},{"type":[14856,14866],"ref":[14853,14854],"id":[14853,14854],"bi":"default"}],"name":["Chapter5","Sequence","isBounded_of_isCauchy"],"modifiers":null,"kind":"theorem","id":{"range":[14808,14838],"original":true}},{"value":{"range":[15058,15069],"original":true},"type":{"range":[15031,15057],"original":true},"signature":{"range":[14950,15057],"pp":" {a b : ℕ → ℚ} (ha : (a : Sequence).IsBounded) (hb : (b : Sequence).IsBounded) : (a + b : Sequence).IsBounded","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[14897,15069],"pp":"/-- Exercise 5.1.2 -/\ntheorem isBounded_add {a b : ℕ → ℚ} (ha : (a : Sequence).IsBounded) (hb : (b : Sequence).IsBounded) :\n    (a + b : Sequence).IsBounded := by sorry","original":true},"params":[{"type":[14955,14966],"ref":[14951,14952],"id":[14951,14952],"bi":"implicit"},{"type":[14955,14966],"ref":[14953,14954],"id":[14953,14954],"bi":"implicit"},{"type":[14973,14995],"ref":[14969,14971],"id":[14969,14971],"bi":"default"},{"type":[15002,15024],"ref":[14998,15000],"id":[14998,15000],"bi":"default"}],"name":["Chapter5","Sequence","isBounded_add"],"modifiers":null,"kind":"theorem","id":{"range":[14927,14949],"original":true}},{"value":{"range":[15210,15221],"original":true},"type":{"range":[15183,15209],"original":true},"signature":{"range":[15102,15209],"pp":" {a b : ℕ → ℚ} (ha : (a : Sequence).IsBounded) (hb : (b : Sequence).IsBounded) : (a - b : Sequence).IsBounded","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[15071,15221],"pp":"theorem isBounded_sub {a b : ℕ → ℚ} (ha : (a : Sequence).IsBounded) (hb : (b : Sequence).IsBounded) :\n    (a - b : Sequence).IsBounded := by sorry","original":true},"params":[{"type":[15107,15118],"ref":[15103,15104],"id":[15103,15104],"bi":"implicit"},{"type":[15107,15118],"ref":[15105,15106],"id":[15105,15106],"bi":"implicit"},{"type":[15125,15147],"ref":[15121,15123],"id":[15121,15123],"bi":"default"},{"type":[15154,15176],"ref":[15150,15152],"id":[15150,15152],"bi":"default"}],"name":["Chapter5","Sequence","isBounded_sub"],"modifiers":null,"kind":"theorem","id":{"range":[15079,15101],"original":true}},{"value":{"range":[15362,15373],"original":true},"type":{"range":[15335,15361],"original":true},"signature":{"range":[15254,15361],"pp":" {a b : ℕ → ℚ} (ha : (a : Sequence).IsBounded) (hb : (b : Sequence).IsBounded) : (a * b : Sequence).IsBounded","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter5","Sequence"],["Chapter5"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter5","Sequence"]},"ref":{"range":[15223,15373],"pp":"theorem isBounded_mul {a b : ℕ → ℚ} (ha : (a : Sequence).IsBounded) (hb : (b : Sequence).IsBounded) :\n    (a * b : Sequence).IsBounded := by sorry","original":true},"params":[{"type":[15259,15270],"ref":[15255,15256],"id":[15255,15256],"bi":"implicit"},{"type":[15259,15270],"ref":[15257,15258],"id":[15257,15258],"bi":"implicit"},{"type":[15277,15299],"ref":[15273,15275],"id":[15273,15275],"bi":"default"},{"type":[15306,15328],"ref":[15302,15304],"id":[15302,15304],"bi":"default"}],"name":["Chapter5","Sequence","isBounded_mul"],"modifiers":null,"kind":"theorem","id":{"range":[15231,15253],"original":true}}]
