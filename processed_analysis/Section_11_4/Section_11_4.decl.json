[{"value":{"range":[893,906],"original":true},"type":{"range":[826,892],"original":true},"signature":{"range":{"stop":892,"start":737},"pp":" {I : BoundedInterval} {f g : ℝ → ℝ} (hf : IntegrableOn f I) (hg : IntegrableOn g I) :\n  IntegrableOn (f + g) I ∧ integ (f + g) I = integ f I + integ g I","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","IntegrableOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":906,"start":669},"pp":"/-- Theorem 11.4.1(a) / Exercise 11.4.1 -/\ntheorem add {I : BoundedInterval} {f g : ℝ → ℝ} (hf : IntegrableOn f I) (hg : IntegrableOn g I) :\n    IntegrableOn (f + g) I ∧ integ (f + g) I = integ f I + integ g I := by sorry","original":true},"params":[{"type":[741,756],"ref":[738,739],"id":[738,739],"bi":"implicit"},{"type":[763,774],"ref":[759,760],"id":[759,760],"bi":"implicit"},{"type":[763,774],"ref":[761,762],"id":[761,762],"bi":"implicit"},{"type":[781,797],"ref":[777,779],"id":[777,779],"bi":"default"},{"type":[804,820],"ref":[800,802],"id":[800,802],"bi":"default"}],"name":["Chapter11","IntegrableOn","add"],"modifiers":null,"kind":"theorem","id":{"range":[720,736],"original":true}},{"value":{"range":[1112,1125],"original":true},"type":{"range":[1049,1111],"original":true},"signature":{"range":{"stop":1111,"start":977},"pp":" {I : BoundedInterval} (c : ℝ) {f : ℝ → ℝ} (hf : IntegrableOn f I) :\n  IntegrableOn (c • f) I ∧ integ (c • f) I = c * integ f I","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","IntegrableOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":1125,"start":908},"pp":"/-- Theorem 11.4.1(b) / Exercise 11.4.1 -/\ntheorem smul {I : BoundedInterval} (c : ℝ) {f : ℝ → ℝ} (hf : IntegrableOn f I) :\n    IntegrableOn (c • f) I ∧ integ (c • f) I = c * integ f I := by sorry","original":true},"params":[{"type":[981,996],"ref":[978,979],"id":[978,979],"bi":"implicit"},{"type":[1001,1004],"ref":[999,1000],"id":[999,1000],"bi":"default"},{"type":[1009,1020],"ref":[1007,1008],"id":[1007,1008],"bi":"implicit"},{"type":[1027,1043],"ref":[1023,1025],"id":[1023,1025],"bi":"default"}],"name":["Chapter11","IntegrableOn","smul"],"modifiers":null,"kind":"theorem","id":{"range":[959,976],"original":true}},{"value":{"range":[1266,1312],"original":true},"type":{"range":[1216,1265],"original":true},"signature":{"range":{"stop":1265,"start":1152},"pp":" {I : BoundedInterval} {f : ℝ → ℝ} (hf : IntegrableOn f I) : IntegrableOn (-f) I ∧ integ (-f) I = -integ f I","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","IntegrableOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":1312,"start":1127},"pp":"theorem neg {I : BoundedInterval} {f : ℝ → ℝ} (hf : IntegrableOn f I) :\n    IntegrableOn (-f) I ∧ integ (-f) I = -integ f I := by have := IntegrableOn.smul (-1) hf; aesop","original":true},"params":[{"type":[1156,1171],"ref":[1153,1154],"id":[1153,1154],"bi":"implicit"},{"type":[1176,1187],"ref":[1174,1175],"id":[1174,1175],"bi":"implicit"},{"type":[1194,1210],"ref":[1190,1192],"id":[1190,1192],"bi":"default"}],"name":["Chapter11","IntegrableOn","neg"],"modifiers":null,"kind":"theorem","id":{"range":[1135,1151],"original":true}},{"value":{"range":[1538,1551],"original":true},"type":{"range":[1471,1537],"original":true},"signature":{"range":{"stop":1537,"start":1382},"pp":" {I : BoundedInterval} {f g : ℝ → ℝ} (hf : IntegrableOn f I) (hg : IntegrableOn g I) :\n  IntegrableOn (f - g) I ∧ integ (f - g) I = integ f I - integ g I","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","IntegrableOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":1551,"start":1314},"pp":"/-- Theorem 11.4.1(c) / Exercise 11.4.1 -/\ntheorem sub {I : BoundedInterval} {f g : ℝ → ℝ} (hf : IntegrableOn f I) (hg : IntegrableOn g I) :\n    IntegrableOn (f - g) I ∧ integ (f - g) I = integ f I - integ g I := by sorry","original":true},"params":[{"type":[1386,1401],"ref":[1383,1384],"id":[1383,1384],"bi":"implicit"},{"type":[1408,1419],"ref":[1404,1405],"id":[1404,1405],"bi":"implicit"},{"type":[1408,1419],"ref":[1406,1407],"id":[1406,1407],"bi":"implicit"},{"type":[1426,1442],"ref":[1422,1424],"id":[1422,1424],"bi":"default"},{"type":[1449,1465],"ref":[1445,1447],"id":[1445,1447],"bi":"default"}],"name":["Chapter11","IntegrableOn","sub"],"modifiers":null,"kind":"theorem","id":{"range":[1365,1381],"original":true}},{"value":{"range":[1740,1753],"original":true},"type":{"range":[1724,1739],"original":true},"signature":{"range":{"stop":1739,"start":1624},"pp":" {I : BoundedInterval} {f : ℝ → ℝ} (hf : IntegrableOn f I) (hf_nonneg : ∀ x ∈ I, 0 ≤ f x) : 0 ≤ integ f I","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","IntegrableOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":1753,"start":1553},"pp":"/-- Theorem 11.4.1(d) / Exercise 11.4.1 -/\ntheorem nonneg {I : BoundedInterval} {f : ℝ → ℝ} (hf : IntegrableOn f I) (hf_nonneg : ∀ x ∈ I, 0 ≤ f x) :\n    0 ≤ integ f I := by sorry","original":true},"params":[{"type":[1628,1643],"ref":[1625,1626],"id":[1625,1626],"bi":"implicit"},{"type":[1648,1659],"ref":[1646,1647],"id":[1646,1647],"bi":"implicit"},{"type":[1666,1682],"ref":[1662,1664],"id":[1662,1664],"bi":"default"},{"type":[1696,1718],"ref":[1685,1694],"id":[1685,1694],"bi":"default"}],"name":["Chapter11","IntegrableOn","nonneg"],"modifiers":null,"kind":"theorem","id":{"range":[1604,1623],"original":true}},{"value":{"range":[1962,1975],"original":true},"type":{"range":[1938,1961],"original":true},"signature":{"range":{"stop":1961,"start":1824},"pp":" {I : BoundedInterval} {f g : ℝ → ℝ} (hf : IntegrableOn f I) (hg : IntegrableOn g I) (h : MajorizesOn g f I) :\n  integ f I ≤ integ g I","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","IntegrableOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":1975,"start":1755},"pp":"/-- Theorem 11.4.1(e) / Exercise 11.4.1 -/\ntheorem mono {I : BoundedInterval} {f g : ℝ → ℝ} (hf : IntegrableOn f I) (hg : IntegrableOn g I)\n    (h : MajorizesOn g f I) : integ f I ≤ integ g I := by sorry","original":true},"params":[{"type":[1828,1843],"ref":[1825,1826],"id":[1825,1826],"bi":"implicit"},{"type":[1850,1861],"ref":[1846,1847],"id":[1846,1847],"bi":"implicit"},{"type":[1850,1861],"ref":[1848,1849],"id":[1848,1849],"bi":"implicit"},{"type":[1868,1884],"ref":[1864,1866],"id":[1864,1866],"bi":"default"},{"type":[1891,1907],"ref":[1887,1889],"id":[1887,1889],"bi":"default"},{"type":[1915,1932],"ref":[1912,1913],"id":[1912,1913],"bi":"default"}],"name":["Chapter11","IntegrableOn","mono"],"modifiers":null,"kind":"theorem","id":{"range":[1806,1823],"original":true}},{"value":{"range":[2148,2161],"original":true},"type":{"range":[2080,2147],"original":true},"signature":{"range":{"stop":2147,"start":2047},"pp":" (c : ℝ) (I : BoundedInterval) : IntegrableOn (fun _ ↦ c) I ∧ integ (fun _ ↦ c) I = c * |I|ₗ","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","IntegrableOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":2161,"start":1977},"pp":"/-- Theorem 11.4.1(f) / Exercise 11.4.1 -/\ntheorem const (c : ℝ) (I : BoundedInterval) : IntegrableOn (fun _ ↦ c) I ∧ integ (fun _ ↦ c) I = c * |I|ₗ := by sorry","original":true},"params":[{"type":[2050,2053],"ref":[2048,2049],"id":[2048,2049],"bi":"default"},{"type":[2059,2074],"ref":[2056,2057],"id":[2056,2057],"bi":"default"}],"name":["Chapter11","IntegrableOn","const"],"modifiers":null,"kind":"theorem","id":{"range":[2028,2046],"original":true}},{"value":{"range":[2362,2375],"original":true},"type":{"range":[2296,2361],"original":true},"signature":{"range":{"stop":2361,"start":2234},"pp":" {I : BoundedInterval} {f : ℝ → ℝ} (hf : ConstantOn f I) : IntegrableOn f I ∧ integ f I = (constant_value_on f I) * |I|ₗ","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","IntegrableOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":2375,"start":2163},"pp":"/-- Theorem 11.4.1(f) / Exercise 11.4.1 -/\ntheorem const' {I : BoundedInterval} {f : ℝ → ℝ} (hf : ConstantOn f I) :\n    IntegrableOn f I ∧ integ f I = (constant_value_on f I) * |I|ₗ := by sorry","original":true},"params":[{"type":[2238,2253],"ref":[2235,2236],"id":[2235,2236],"bi":"implicit"},{"type":[2258,2269],"ref":[2256,2257],"id":[2256,2257],"bi":"implicit"},{"type":[2276,2290],"ref":[2272,2274],"id":[2272,2274],"bi":"default"}],"name":["Chapter11","IntegrableOn","const'"],"modifiers":null,"kind":"theorem","id":{"range":[2214,2233],"original":true}},{"value":{"range":[2609,2622],"original":true},"type":{"range":[2555,2608],"original":true},"signature":{"range":{"stop":2608,"start":2472},"pp":" {I J : BoundedInterval} (hIJ : I ⊆ J) {f : ℝ → ℝ} (h : IntegrableOn f I) :\n  IntegrableOn (fun x ↦ if x ∈ I then f x else 0) J","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","IntegrableOn"],["Chapter9"],["Classical"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Classical"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":2622,"start":2396},"pp":"/-- Theorem 11.4.1 (g)  / Exercise 11.4.1 -/\ntheorem of_extend {I J : BoundedInterval} (hIJ : I ⊆ J) {f : ℝ → ℝ} (h : IntegrableOn f I) :\n    IntegrableOn (fun x ↦ if x ∈ I then f x else 0) J := by sorry","original":true},"params":[{"type":[2478,2493],"ref":[2473,2474],"id":[2473,2474],"bi":"implicit"},{"type":[2478,2493],"ref":[2475,2476],"id":[2475,2476],"bi":"implicit"},{"type":[2501,2508],"ref":[2496,2499],"id":[2496,2499],"bi":"default"},{"type":[2516,2527],"ref":[2513,2514],"id":[2513,2514],"bi":"implicit"},{"type":[2533,2549],"ref":[2530,2531],"id":[2530,2531],"bi":"default"}],"name":["Chapter11","IntegrableOn","of_extend"],"modifiers":null,"kind":"theorem","id":{"range":[2449,2471],"original":true}},{"value":{"range":[2861,2874],"original":true},"type":{"range":[2802,2860],"original":true},"signature":{"range":{"stop":2860,"start":2719},"pp":" {I J : BoundedInterval} (hIJ : I ⊆ J) {f : ℝ → ℝ} (h : IntegrableOn f I) :\n  integ (fun x ↦ if x ∈ I then f x else 0) J = integ f I","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","IntegrableOn"],["Chapter9"],["Classical"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Classical"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":2874,"start":2642},"pp":"/-- Theorem 11.4.1 (g)  / Exercise 11.4.1 -/\ntheorem of_extend' {I J : BoundedInterval} (hIJ : I ⊆ J) {f : ℝ → ℝ} (h : IntegrableOn f I) :\n    integ (fun x ↦ if x ∈ I then f x else 0) J = integ f I := by sorry","original":true},"params":[{"type":[2725,2740],"ref":[2720,2721],"id":[2720,2721],"bi":"implicit"},{"type":[2725,2740],"ref":[2722,2723],"id":[2722,2723],"bi":"implicit"},{"type":[2748,2755],"ref":[2743,2746],"id":[2743,2746],"bi":"default"},{"type":[2763,2774],"ref":[2760,2761],"id":[2760,2761],"bi":"implicit"},{"type":[2780,2796],"ref":[2777,2778],"id":[2777,2778],"bi":"default"}],"name":["Chapter11","IntegrableOn","of_extend'"],"modifiers":null,"kind":"theorem","id":{"range":[2695,2718],"original":true}},{"value":{"range":[3134,3147],"original":true},"type":{"range":[3058,3133],"original":true},"signature":{"range":{"stop":3133,"start":2968},"pp":" {I J K : BoundedInterval} (hIJK : K.joins I J) {f : ℝ → ℝ} (h : IntegrableOn f K) :\n  IntegrableOn f I ∧ IntegrableOn f J ∧ integ f K = integ f I + integ f J","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","IntegrableOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":3147,"start":2876},"pp":"/-- Theorem 11.4.1 (h) (Laws of integration) / Exercise 11.4.1 -/\ntheorem join {I J K : BoundedInterval} (hIJK : K.joins I J) {f : ℝ → ℝ} (h : IntegrableOn f K) :\n    IntegrableOn f I ∧ IntegrableOn f J ∧ integ f K = integ f I + integ f J := by sorry","original":true},"params":[{"type":[2976,2991],"ref":[2969,2970],"id":[2969,2970],"bi":"implicit"},{"type":[2976,2991],"ref":[2971,2972],"id":[2971,2972],"bi":"implicit"},{"type":[2976,2991],"ref":[2973,2974],"id":[2973,2974],"bi":"implicit"},{"type":[3000,3011],"ref":[2994,2998],"id":[2994,2998],"bi":"default"},{"type":[3019,3030],"ref":[3016,3017],"id":[3016,3017],"bi":"implicit"},{"type":[3036,3052],"ref":[3033,3034],"id":[3033,3034],"bi":"default"}],"name":["Chapter11","IntegrableOn","join"],"modifiers":null,"kind":"theorem","id":{"range":[2950,2967],"original":true}},{"value":{"range":[3351,3364],"original":true},"type":{"range":[3334,3350],"original":true},"signature":{"range":{"stop":3350,"start":3253},"pp":" {I J : BoundedInterval} (hIJ : J ⊆ I) {f : ℝ → ℝ} (h : IntegrableOn f I) : IntegrableOn f J","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","IntegrableOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":3364,"start":3149},"pp":"/-- A variant of Theorem 11.4.1(h) that will be useful in later sections. -/\ntheorem mono' {I J : BoundedInterval} (hIJ : J ⊆ I) {f : ℝ → ℝ} (h : IntegrableOn f I) : IntegrableOn f J := by sorry","original":true},"params":[{"type":[3259,3274],"ref":[3254,3255],"id":[3254,3255],"bi":"implicit"},{"type":[3259,3274],"ref":[3256,3257],"id":[3256,3257],"bi":"implicit"},{"type":[3282,3289],"ref":[3277,3280],"id":[3277,3280],"bi":"default"},{"type":[3297,3308],"ref":[3294,3295],"id":[3294,3295],"bi":"implicit"},{"type":[3314,3330],"ref":[3311,3312],"id":[3311,3312],"bi":"default"}],"name":["Chapter11","IntegrableOn","mono'"],"modifiers":null,"kind":"theorem","id":{"range":[3234,3252],"original":true}},{"value":{"range":[3612,3625],"original":true},"type":{"range":[3590,3611],"original":true},"signature":{"range":{"stop":3611,"start":3475},"pp":" {I J : BoundedInterval} (hIJ : J ⊆ I) (ha : J.a = I.a) (hb : J.b = I.b) {f : ℝ → ℝ} (h : IntegrableOn f I) :\n  integ f J = integ f I","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","IntegrableOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":3625,"start":3366},"pp":"/-- A further variant of Theorem 11.4.1(h) that will be useful in later sections. -/\ntheorem eq {I J : BoundedInterval} (hIJ : J ⊆ I) (ha : J.a = I.a) (hb : J.b = I.b) {f : ℝ → ℝ} (h : IntegrableOn f I) :\n    integ f J = integ f I := by sorry","original":true},"params":[{"type":[3481,3496],"ref":[3476,3477],"id":[3476,3477],"bi":"implicit"},{"type":[3481,3496],"ref":[3478,3479],"id":[3478,3479],"bi":"implicit"},{"type":[3504,3511],"ref":[3499,3502],"id":[3499,3502],"bi":"default"},{"type":[3520,3529],"ref":[3516,3518],"id":[3516,3518],"bi":"default"},{"type":[3536,3545],"ref":[3532,3534],"id":[3532,3534],"bi":"default"},{"type":[3553,3564],"ref":[3550,3551],"id":[3550,3551],"bi":"implicit"},{"type":[3570,3586],"ref":[3567,3568],"id":[3567,3568],"bi":"default"}],"name":["Chapter11","IntegrableOn","eq"],"modifiers":null,"kind":"theorem","id":{"range":[3459,3474],"original":true}},{"value":{"range":[3773,3934],"original":true},"type":{"range":[3765,3772],"original":true},"signature":{"range":{"stop":3772,"start":3725},"pp":" {x C : ℝ} (h : ∀ ε > 0, x ≤ C * ε) : x ≤ 0","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11"]},"ref":{"range":{"stop":3934,"start":3627},"pp":"/-- A handy little lemma for \"epsilon of room\" type arguments -/\ntheorem nonneg_of_le_const_mul_eps {x C : ℝ} (h : ∀ ε > 0, x ≤ C * ε) : x ≤ 0 :=\n  by\n  by_cases hC : C > 0\n  . by_contra!\n    specialize h (x / (2 * C)) (by positivity); convert_to x ≤ x / 2 at h; grind\n    linarith\n  specialize h 1 ?_ <;> grind","original":true},"params":[{"type":[3730,3733],"ref":[3726,3727],"id":[3726,3727],"bi":"implicit"},{"type":[3730,3733],"ref":[3728,3729],"id":[3728,3729],"bi":"implicit"},{"type":[3739,3761],"ref":[3736,3737],"id":[3736,3737],"bi":"default"}],"name":["Chapter11","nonneg_of_le_const_mul_eps"],"modifiers":null,"kind":"theorem","id":{"range":[3698,3724],"original":true}},{"value":{"range":[4134,6763],"original":true},"type":{"range":[4108,4132],"original":true},"signature":{"range":{"stop":4132,"start":4019},"pp":" {I : BoundedInterval} {f g : ℝ → ℝ} (hf : IntegrableOn f I) (hg : IntegrableOn g I) : IntegrableOn (f ⊔ g) I","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","IntegrableOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":6763,"start":3936},"pp":"/-- Theorem 11.4.3 (Max and min preserve integrability)-/\ntheorem max {I : BoundedInterval} {f g : ℝ → ℝ} (hf : IntegrableOn f I) (hg : IntegrableOn g I) :\n    IntegrableOn (f ⊔ g) I := by\n  -- This proof is written to follow the structure of the original text.\n  \n  unfold IntegrableOn at hf hg\n  have hmax_bound : BddOn (f ⊔ g) I := by\n    choose M hM using hf.1; choose M' hM' using hg.1\n    use M ⊔ M'; peel hM with x hx hM; specialize hM' _ hx\n    simp only [Pi.sup_apply]\n    exact abs_max_le_max_abs_abs.trans (sup_le_sup hM hM')\n  have lower_le_upper : 0 ≤ upper_integral (f ⊔ g) I - lower_integral (f ⊔ g) I := by\n    linarith [lower_integral_le_upper hmax_bound]\n  have (ε : ℝ) (hε : 0 < ε) : upper_integral (f ⊔ g) I - lower_integral (f ⊔ g) I ≤ 4 * ε :=\n    by\n    choose f' hf'min hf'const hf'int using\n      gt_of_lt_lower_integral hf.1 (show integ f I - ε < lower_integral f I by grind)\n    choose g' hg'min hg'const hg'int using\n      gt_of_lt_lower_integral hg.1 (show integ g I - ε < lower_integral g I by grind)\n    choose f'' hf''max hf''const hf''int using\n      lt_of_gt_upper_integral hf.1 (show upper_integral f I < integ f I + ε by grind)\n    choose g'' hg''max hg''const hg''int using\n      lt_of_gt_upper_integral hg.1 (show upper_integral g I < integ g I + ε by grind)\n    set h := (f'' - f') + (g'' - g')\n    have hf'_integ := integ_of_piecewise_const hf'const\n    have hg'_integ := integ_of_piecewise_const hg'const\n    have hf''_integ := integ_of_piecewise_const hf''const\n    have hg''_integ := integ_of_piecewise_const hg''const\n    have hf''f'_integ := hf''_integ.1.sub hf'_integ.1\n    have hg''g'_integ := hg''_integ.1.sub hg'_integ.1\n    have hh_IntegrableOn.eq := hf''f'_integ.1.add hg''g'_integ.1\n    have hinteg_le : integ h I ≤ 4 * ε := by linarith\n    have hf''g''_const := hf''const.max hg''const\n    have hf''g''_maj : MajorizesOn (f'' ⊔ g'') (f ⊔ g) I := by sorry\n    have hf'g'_const := hf'const.max hg'const\n    have hf'g'_maj : MinorizesOn (f' ⊔ g') (f ⊔ g) I := by sorry\n    have hff'g''_ge := upper_integral_le_integ hmax_bound hf''g''_maj hf''g''_const\n    have hf'g'_le := integ_le_lower_integral hmax_bound hf'g'_maj hf'g'_const\n    have : MinorizesOn (f'' ⊔ g'') (f' ⊔ g' + h) I :=\n      by\n      peel hf'min with x hx hf'min; specialize hg'min _ hx; specialize hf''max _ hx; specialize hg''max _ hx\n      simp [h]; split_ands <;> linarith [le_max_left (f' x) (g' x), le_max_right (f' x) (g' x)]\n    have hf'g'_integ := integ_of_piecewise_const hf'g'_const\n    have hf''g''_integ := integ_of_piecewise_const hf''g''_const\n    have hf'g'h_integ := hf'g'_integ.1.add hh_IntegrableOn.eq.1\n    rw [MinorizesOn.iff] at this\n    linarith [hf''g''_integ.1.mono hf'g'h_integ.1 this]\n  exact ⟨hmax_bound, by linarith [nonneg_of_le_const_mul_eps this]⟩","original":true},"params":[{"type":[4023,4038],"ref":[4020,4021],"id":[4020,4021],"bi":"implicit"},{"type":[4045,4056],"ref":[4041,4042],"id":[4041,4042],"bi":"implicit"},{"type":[4045,4056],"ref":[4043,4044],"id":[4043,4044],"bi":"implicit"},{"type":[4063,4079],"ref":[4059,4061],"id":[4059,4061],"bi":"default"},{"type":[4086,4102],"ref":[4082,4084],"id":[4082,4084],"bi":"default"}],"name":["Chapter11","IntegrableOn","max"],"modifiers":null,"kind":"theorem","id":{"range":[4002,4018],"original":true}},{"value":{"range":[7016,7029],"original":true},"type":{"range":[6990,7014],"original":true},"signature":{"range":{"stop":7014,"start":6901},"pp":" {I : BoundedInterval} {f g : ℝ → ℝ} (hf : IntegrableOn f I) (hg : IntegrableOn g I) : IntegrableOn (f ⊓ g) I","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","IntegrableOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":7029,"start":6767},"pp":"/-- Theorem 11.4.5 / Exercise 11.4.3.  The objective here is to create a shorter proof than the one above.-/\ntheorem min {I : BoundedInterval} {f g : ℝ → ℝ} (hf : IntegrableOn f I) (hg : IntegrableOn g I) :\n    IntegrableOn (f ⊓ g) I := by sorry","original":true},"params":[{"type":[6905,6920],"ref":[6902,6903],"id":[6902,6903],"bi":"implicit"},{"type":[6927,6938],"ref":[6923,6924],"id":[6923,6924],"bi":"implicit"},{"type":[6927,6938],"ref":[6925,6926],"id":[6925,6926],"bi":"implicit"},{"type":[6945,6961],"ref":[6941,6943],"id":[6941,6943],"bi":"default"},{"type":[6968,6984],"ref":[6964,6966],"id":[6964,6966],"bi":"default"}],"name":["Chapter11","IntegrableOn","min"],"modifiers":null,"kind":"theorem","id":{"range":[6884,6900],"original":true}},{"value":{"range":[7167,7341],"original":true},"type":{"range":[7144,7166],"original":true},"signature":{"range":{"stop":7166,"start":7080},"pp":" {I : BoundedInterval} {f : ℝ → ℝ} (hf : IntegrableOn f I) : IntegrableOn (abs f) I","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","IntegrableOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":7341,"start":7031},"pp":"/-- Corollary 11.4.4 -/\ntheorem abs {I : BoundedInterval} {f : ℝ → ℝ} (hf : IntegrableOn f I) : IntegrableOn (abs f) I :=\n  by\n  have := (IntegrableOn.const 0 I).1\n  convert ((hf.max this).sub (hf.min this)).1 using 1\n  ext x; obtain h | h := (show f x ≤ 0 ∨ f x ≥ 0 by grind) <;> simp [h]","original":true},"params":[{"type":[7084,7099],"ref":[7081,7082],"id":[7081,7082],"bi":"implicit"},{"type":[7104,7115],"ref":[7102,7103],"id":[7102,7103],"bi":"implicit"},{"type":[7122,7138],"ref":[7118,7120],"id":[7118,7120],"bi":"default"}],"name":["Chapter11","IntegrableOn","abs"],"modifiers":null,"kind":"theorem","id":{"range":[7063,7079],"original":true}},{"value":{"range":[7670,13501],"original":true},"type":{"range":[7647,7669],"original":true},"signature":{"range":{"stop":7669,"start":7494},"pp":" {I : BoundedInterval} {f g : ℝ → ℝ} (hf : IntegrableOn f I) (hg : IntegrableOn g I) (hf_nonneg : MajorizesOn f 0 I)\n  (hg_nonneg : MajorizesOn g 0 I) : IntegrableOn (f * g) I","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11"]},"ref":{"range":{"stop":13501,"start":7343},"pp":"/-- Theorem 11.4.5 (Products preserve Riemann integrability).\nIt is convenient to first establish the non-negative case.-/\ntheorem integ_of_mul_nonneg {I : BoundedInterval} {f g : ℝ → ℝ} (hf : IntegrableOn f I) (hg : IntegrableOn g I)\n    (hf_nonneg : MajorizesOn f 0 I) (hg_nonneg : MajorizesOn g 0 I) : IntegrableOn (f * g) I := by\n  -- This proof is written to follow the structure of the original text.\n  \n  by_cases hI : (I : Set ℝ).Nonempty\n  swap\n  . apply (integ_on_subsingleton _).1\n    rw [← BoundedInterval.length_of_subsingleton]\n    simp_all [Set.not_nonempty_iff_eq_empty]\n  unfold IntegrableOn at hf hg\n  choose M₁ hM₁ using hf.1\n  choose M₂ hM₂ using hg.1\n  have hM₁pos : 0 ≤ M₁ := (abs_nonneg _).trans (hM₁ hI.some hI.some_mem)\n  have hM₂pos : 0 ≤ M₂ := (abs_nonneg _).trans (hM₂ hI.some hI.some_mem)\n  have hmul_bound : BddOn (f * g) I := by\n    use M₁ * M₂; peel hM₁ with x hx hM₁; specialize hM₂ _ hx\n    simp [abs_mul]; apply mul_le_mul hM₁ hM₂ <;> positivity\n  have lower_le_upper : 0 ≤ upper_integral (f * g) I - lower_integral (f * g) I := by\n    linarith [lower_integral_le_upper hmul_bound]\n  have (ε : ℝ) (hε : 0 < ε) : upper_integral (f * g) I - lower_integral (f * g) I ≤ 2 * (M₁ + M₂) * ε :=\n    by\n    have :\n      ∃ f',\n        MinorizesOn f' f I ∧\n          PiecewiseConstantOn f' I ∧ integ f I - ε < PiecewiseConstantOn.integ f' I ∧ MajorizesOn f' 0 I :=\n      by\n      choose f' hf'min hf'const hf'int using\n        gt_of_lt_lower_integral hf.1 (show integ f I - ε < lower_integral f I by linarith)\n      use max f' 0\n      have hzero := (ConstantOn.of_const' 0 I).piecewiseConstantOn\n      split_ands\n      . peel hf_nonneg with x hx _; specialize hf'min _ hx; aesop\n      . exact hf'const.max hzero\n      . apply lt_of_lt_of_le hf'int (hf'const.integ_mono _ (hf'const.max hzero)); simp\n      intro _; simp\n    choose f' hf'min hf'const hf'int hf'_nonneg using this\n    have :\n      ∃ g',\n        MinorizesOn g' g I ∧\n          PiecewiseConstantOn g' I ∧ integ g I - ε < PiecewiseConstantOn.integ g' I ∧ MajorizesOn g' 0 I :=\n      by\n      obtain ⟨g', hg'min, hg'const, hg'int⟩ :=\n        gt_of_lt_lower_integral hg.1 (show integ g I - ε < lower_integral g I by linarith)\n      use max g' 0\n      have hzero := (ConstantOn.of_const' 0 I).piecewiseConstantOn\n      split_ands\n      . peel hg_nonneg with x hx _; specialize hg'min _ hx; aesop\n      . exact hg'const.max hzero\n      . apply lt_of_lt_of_le hg'int (hg'const.integ_mono _ (hg'const.max hzero)); simp\n      intro _; simp\n    choose g' hg'min hg'const hg'int hg'_nonneg using this\n    have :\n      ∃ f'',\n        MajorizesOn f'' f I ∧\n          PiecewiseConstantOn f'' I ∧\n            PiecewiseConstantOn.integ f'' I < integ f I + ε ∧ MinorizesOn f'' (fun _ ↦ M₁) I :=\n      by\n      obtain ⟨f'', hf''maj, hf''const, hf''int⟩ :=\n        lt_of_gt_upper_integral hf.1 (show upper_integral f I < integ f I + ε by linarith)\n      use min f'' (fun _ ↦ M₁)\n      have hM₁_piece := (ConstantOn.of_const' M₁ I).piecewiseConstantOn\n      split_ands\n      . peel hM₁ with x hx hM₁; rw [abs_le'] at hM₁\n        simp [hf''maj _ hx, hM₁.1]\n      . exact hf''const.min hM₁_piece\n      . apply lt_of_le_of_lt ((hf''const.min hM₁_piece).integ_mono _ hf''const) hf''int\n        simp\n      intro _; simp\n    choose f'' hf''maj hf''const hf''int hf''bound using this\n    have :\n      ∃ g'',\n        MajorizesOn g'' g I ∧\n          PiecewiseConstantOn g'' I ∧\n            PiecewiseConstantOn.integ g'' I < integ g I + ε ∧ MinorizesOn g'' (fun _ ↦ M₂) I :=\n      by\n      obtain ⟨g'', hg''maj, hg''const, hg''int⟩ :=\n        lt_of_gt_upper_integral hg.1 (show upper_integral g I < integ g I + ε by linarith)\n      use min g'' (fun _ ↦ M₂)\n      have hM₂_piece := (ConstantOn.of_const' M₂ I).piecewiseConstantOn\n      split_ands\n      . peel hM₂ with x hx hM₂; rw [abs_le'] at hM₂\n        simp [hg''maj _ hx, hM₂.1]\n      . exact hg''const.min hM₂_piece\n      . apply lt_of_le_of_lt ((hg''const.min hM₂_piece).integ_mono _ hg''const) hg''int\n        simp\n      intro _ _; simp\n    choose g'' hg''maj hg''const hg''int hg''bound using this\n    have hf'g'_const := hf'const.mul hg'const\n    have hf'g'_maj : MinorizesOn (f' * g') (f * g) I :=\n      by\n      peel hf'min with x hx hf'min; specialize hg'min _ hx; specialize hf'_nonneg _ hx; specialize hg'_nonneg _ hx\n      simp at *; apply mul_le_mul hf'min hg'min <;> grind\n    have hf''g''_const := hf''const.mul hg''const\n    have hf''g''_maj : MajorizesOn (f'' * g'') (f * g) I :=\n      by\n      peel hf''maj with x hx hf''maj; specialize hg''maj _ hx\n      specialize hg_nonneg _ hx; specialize hf_nonneg _ hx\n      simp at *; apply mul_le_mul hf''maj hg''maj <;> grind\n    have hupper_le := upper_integral_le_integ hmul_bound hf''g''_maj hf''g''_const\n    have hlower_ge := integ_le_lower_integral hmul_bound hf'g'_maj hf'g'_const\n    have hh_const := hf''g''_const.sub hf'g'_const\n    have hh_integ := hf''g''_const.integ_sub hf'g'_const\n    have hhmin : MinorizesOn (f'' * g'' - f' * g') (M₁ • (g'' - g') + M₂ • (f'' - f')) I :=\n      by\n      intro x hx\n      simp only [Pi.sub_apply, Pi.mul_apply, Pi.add_apply, Pi.smul_apply, smul_eq_mul]\n      calc\n        _ = (f'' x) * (g'' x - g' x) + (g' x) * (f'' x - f' x) := by ring\n        _ ≤ _ := by gcongr <;> grind\n    have hg''g'_const := hg''const.sub hg'const\n    have hg''g'_integ := hg''const.integ_sub hg'const\n    have hM₁g''g'_const := hg''g'_const.smul M₁\n    have hM₁g''g_integ := hg''g'_const.integ_smul M₁\n    have hf''f'_const := hf''const.sub hf'const\n    have hf''f_integ := hf''const.integ_sub hf'const\n    have hM₂f''f'_const := hf''f'_const.smul M₂\n    have hM₂f''f_integ := hf''f'_const.integ_smul M₂\n    have hsum_const := hM₁g''g'_const.add hM₂f''f'_const\n    have hsum_integ := hM₁g''g'_const.integ_add hM₂f''f'_const\n    have hsum_bound := hh_const.integ_mono hhmin hsum_const\n    calc\n      _ ≤ M₁ * PiecewiseConstantOn.integ (g'' - g') I + M₂ * PiecewiseConstantOn.integ (f'' - f') I := by linarith\n      _ ≤ M₁ * (2 * ε) + M₂ * (2 * ε) := by gcongr <;> linarith\n      _ = _ := by ring\n  exact ⟨hmul_bound, by linarith [nonneg_of_le_const_mul_eps this]⟩","original":true},"params":[{"type":[7498,7513],"ref":[7495,7496],"id":[7495,7496],"bi":"implicit"},{"type":[7520,7531],"ref":[7516,7517],"id":[7516,7517],"bi":"implicit"},{"type":[7520,7531],"ref":[7518,7519],"id":[7518,7519],"bi":"implicit"},{"type":[7538,7554],"ref":[7534,7536],"id":[7534,7536],"bi":"default"},{"type":[7561,7577],"ref":[7557,7559],"id":[7557,7559],"bi":"default"},{"type":[7593,7610],"ref":[7582,7591],"id":[7582,7591],"bi":"default"},{"type":[7624,7641],"ref":[7613,7622],"id":[7613,7622],"bi":"default"}],"name":["Chapter11","integ_of_mul_nonneg"],"modifiers":null,"kind":"theorem","id":{"range":[7474,7493],"original":true}},{"value":{"range":[13637,15038],"original":true},"type":{"range":[13614,13636],"original":true},"signature":{"range":{"stop":13636,"start":13525},"pp":" {I : BoundedInterval} {f g : ℝ → ℝ} (hf : IntegrableOn f I) (hg : IntegrableOn g I) : IntegrableOn (f * g) I","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11"]},"ref":{"range":{"stop":15038,"start":13504},"pp":"theorem integ_of_mul {I : BoundedInterval} {f g : ℝ → ℝ} (hf : IntegrableOn f I) (hg : IntegrableOn g I) :\n    IntegrableOn (f * g) I := by\n  -- This proof is written to follow the structure of the original text.\n  \n  set fplus := max f (fun _ ↦ 0)\n  set fminus := -min f (fun _ ↦ 0)\n  set gplus := max g (fun _ ↦ 0)\n  set gminus := -min g (fun _ ↦ 0)\n  have := (IntegrableOn.const 0 I).1\n  observe hfplus_integ : IntegrableOn fplus I\n  observe hgplus_integ : IntegrableOn gplus I\n  have hfminus_integ : IntegrableOn fminus I := (hf.min this).neg.1\n  have hgminus_integ : IntegrableOn gminus I := (hg.min this).neg.1\n  have hfplus_nonneg : MajorizesOn fplus 0 I := by intro _; simp [fplus]\n  have hfminus_nonneg : MajorizesOn fminus 0 I := by intro _; simp [fminus]\n  have hgplus_nonneg : MajorizesOn gplus 0 I := by intro _; simp [gplus]\n  have hgminus_nonneg : MajorizesOn gminus 0 I := by intro _; simp [gminus]\n  have hfplusgplus := integ_of_mul_nonneg hfplus_integ hgplus_integ hfplus_nonneg hgplus_nonneg\n  have hfplusgminus := integ_of_mul_nonneg hfplus_integ hgminus_integ hfplus_nonneg hgminus_nonneg\n  have hfminusgplus := integ_of_mul_nonneg hfminus_integ hgplus_integ hfminus_nonneg hgplus_nonneg\n  have hfminusgminus := integ_of_mul_nonneg hfminus_integ hgminus_integ hfminus_nonneg hgminus_nonneg\n  rw [show f = fplus - fminus by ext; simp [fplus, fminus], show g = gplus - gminus by ext; simp [gplus, gminus]]\n  ring_nf\n  exact ((hfplusgplus.add (hfplusgminus.neg.1.sub hfminusgplus).1).1.add hfminusgminus).1","original":true},"params":[{"type":[13529,13544],"ref":[13526,13527],"id":[13526,13527],"bi":"implicit"},{"type":[13551,13562],"ref":[13547,13548],"id":[13547,13548],"bi":"implicit"},{"type":[13551,13562],"ref":[13549,13550],"id":[13549,13550],"bi":"implicit"},{"type":[13569,13585],"ref":[13565,13567],"id":[13565,13567],"bi":"default"},{"type":[13592,13608],"ref":[13588,13590],"id":[13588,13590],"bi":"default"}],"name":["Chapter11","integ_of_mul"],"modifiers":null,"kind":"theorem","id":{"range":[13512,13524],"original":true}},{"value":{"range":[15238,15253],"original":true},"type":{"range":[15193,15237],"original":true},"signature":{"range":{"stop":15237,"start":15111},"pp":" {I : BoundedInterval} {f : ℝ → ℝ} (hf : IntegrableOn f I) (P : Partition I) : integ f I = ∑ J ∈ P.intervals, integ f J","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","BoundedInterval"],["Chapter11","IntegrableOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":15253,"start":15061},"pp":"/-- Exercise 11.4.2 -/\ntheorem split {I : BoundedInterval} {f : ℝ → ℝ} (hf : IntegrableOn f I) (P : Partition I) :\n    integ f I = ∑ J ∈ P.intervals, integ f J := by sorry","original":true},"params":[{"type":[15115,15130],"ref":[15112,15113],"id":[15112,15113],"bi":"implicit"},{"type":[15136,15147],"ref":[15133,15134],"id":[15133,15134],"bi":"implicit"},{"type":[15154,15170],"ref":[15150,15152],"id":[15150,15152],"bi":"default"},{"type":[15176,15187],"ref":[15173,15174],"id":[15173,15174],"bi":"default"}],"name":["Chapter11","IntegrableOn","split"],"modifiers":null,"kind":"theorem","id":{"range":[15092,15110],"original":true}}]
