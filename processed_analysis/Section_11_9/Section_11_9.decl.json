[{"value":{"range":[1067,2711],"original":true},"type":{"range":[1014,1066],"original":true},"signature":{"range":{"stop":1066,"start":953},"pp":" {a b : ℝ} {f : ℝ → ℝ} (hf : IntegrableOn f (Icc a b)) : ContinuousOn (fun x => integ f (Icc a x)) (.Icc a b)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","BoundedInterval"],["Chapter10"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter10"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11"]},"ref":{"range":{"stop":2711,"start":871},"pp":"/-- Theorem 11.9.1 (First Fundamental Theorem of Calculus)-/\ntheorem cts_of_integ {a b : ℝ} {f : ℝ → ℝ} (hf : IntegrableOn f (Icc a b)) :\n    ContinuousOn (fun x => integ f (Icc a x)) (.Icc a b) := by\n  -- This proof is written to follow the structure of the original text.\n  \n  set F : ℝ → ℝ := fun x => integ f (Icc a x)\n  choose M hM using hf.1\n  have {x y : ℝ} (hxy : x < y) (hx : x ∈ Set.Icc a b) (hy : y ∈ Set.Icc a b) : |F y - F x| ≤ M * (y - x) :=\n    by\n    simp at hx hy\n    have := ((hf.join (join_Icc_Ioc hy.1 hy.2)).1.join (join_Icc_Ioc hx.1 (le_of_lt hxy))).2\n    simp [F, this.2, abs_le']\n    constructor\n    . convert this.1.mono (g := fun _ ↦ M) (IntegrableOn.const _ _).1 _\n      . simp [IntegrableOn.const, le_of_lt hxy]\n      intro z hz\n      specialize hM z ?_\n      . simp at *; grind\n      grind [abs_le']\n    rw [neg_le]\n    convert (IntegrableOn.const _ _).1.mono (f := fun _ ↦ -M) this.1 _\n    . simp [IntegrableOn.const, le_of_lt hxy]\n    intro z hz\n    specialize hM z ?_\n    . simp at *; grind\n    grind [abs_le']\n  replace {x y : ℝ} (hx : x ∈ Set.Icc a b) (hy : y ∈ Set.Icc a b) : |F y - F x| ≤ M * |x - y| :=\n    by\n    obtain h | rfl | h := lt_trichotomy x y\n    . simp [abs_of_neg (show x - y < 0 by linarith), this h hx hy]\n    . simp\n    . simp [abs_of_pos (show 0 < x - y by linarith), abs_sub_comm, this h hy hx]\n  replace : UniformContinuousOn F (.Icc a b) :=\n    by\n    simp [Metric.uniformContinuousOn_iff, Real.dist_eq, -Set.mem_Icc]\n    intro ε hε\n    use (ε / (max M 1)), (by positivity)\n    intro x hx y hy hxy\n    calc\n      _ = |F y - F x| := by rw [abs_sub_comm]\n      _ ≤ M * |x - y| := (this hx hy)\n      _ ≤ (max M 1) * |x - y| := by gcongr; apply le_max_left\n      _ < (max M 1) * (ε / (max M 1)) := by gcongr\n      _ = _ := by field_simp\n  exact ContinuousOn.ofUniformContinuousOn F this","original":true},"params":[{"type":[958,961],"ref":[954,955],"id":[954,955],"bi":"implicit"},{"type":[958,961],"ref":[956,957],"id":[956,957],"bi":"implicit"},{"type":[966,977],"ref":[964,965],"id":[964,965],"bi":"implicit"},{"type":[984,1008],"ref":[980,982],"id":[980,982],"bi":"default"}],"name":["Chapter11","cts_of_integ"],"modifiers":null,"kind":"theorem","id":{"range":[940,952],"original":true}},{"value":{"range":[2969,3876],"original":true},"type":{"range":[2898,2968],"original":true},"signature":{"range":{"stop":2968,"start":2736},"pp":" {a b : ℝ} (hab : a < b) {f : ℝ → ℝ} (hf : IntegrableOn f (Icc a b)) {x₀ : ℝ} (hx₀ : x₀ ∈ Set.Icc a b)\n  (hcts : ContinuousWithinAt f (Icc a b) x₀) : HasDerivWithinAt (fun x => integ f (Icc a x)) (f x₀) (.Icc a b) x₀","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","BoundedInterval"],["Chapter10"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter10"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11"]},"ref":{"range":{"stop":3876,"start":2713},"pp":"theorem deriv_of_integ {a b : ℝ} (hab : a < b) {f : ℝ → ℝ} (hf : IntegrableOn f (Icc a b)) {x₀ : ℝ}\n    (hx₀ : x₀ ∈ Set.Icc a b) (hcts : ContinuousWithinAt f (Icc a b) x₀) :\n    HasDerivWithinAt (fun x => integ f (Icc a x)) (f x₀) (.Icc a b) x₀ := by\n  -- This proof is written to follow the structure of the original text.\n  \n  rw [HasDerivWithinAt.iff_approx_linear]\n  simp [(ContinuousWithinAt.tfae _ f hx₀).out 0 2] at hcts\n  peel hcts with ε hε δ hδ hconv; intro y hy hyδ\n  obtain hx₀y | rfl | hx₀y := lt_trichotomy x₀ y\n  . have := ((hf.join (join_Icc_Ioc hy.1 hy.2)).1.join (join_Icc_Ioc hx₀.1 (le_of_lt hx₀y))).2\n    simp [this.2, abs_le', abs_of_pos (show 0 < y - x₀ by linarith)]\n    have h1 := this.1.mono (g := fun _ ↦ f x₀ + ε) (IntegrableOn.const _ _).1 ?_\n    have h2 := (IntegrableOn.const _ _).1.mono (f := fun _ ↦ f x₀ - ε) this.1 ?_\n    . simp [IntegrableOn.const, le_of_lt hx₀y] at h1 h2\n      split_ands\n      . convert h1 using 1; ring\n      . simp [← sub_nonneg] at *; convert h2 using 1; ring\n    all_goals intro z hz; simp [abs_lt] at *; specialize hconv z ?_ ?_ ?_ ?_ <;> linarith\n  . simp\n  sorry","original":true},"params":[{"type":[2741,2744],"ref":[2737,2738],"id":[2737,2738],"bi":"implicit"},{"type":[2741,2744],"ref":[2739,2740],"id":[2739,2740],"bi":"implicit"},{"type":[2752,2757],"ref":[2747,2750],"id":[2747,2750],"bi":"default"},{"type":[2762,2773],"ref":[2760,2761],"id":[2760,2761],"bi":"implicit"},{"type":[2780,2804],"ref":[2776,2778],"id":[2776,2778],"bi":"default"},{"type":[2814,2817],"ref":[2809,2813],"id":[2809,2813],"bi":"implicit"},{"type":[2828,2848],"ref":[2820,2825],"id":[2820,2825],"bi":"default"},{"type":[2857,2892],"ref":[2851,2855],"id":[2851,2855],"bi":"default"}],"name":["Chapter11","deriv_of_integ"],"modifiers":null,"kind":"theorem","id":{"range":[2721,2735],"original":true}},{"value":{"range":[3965,4039],"original":true},"type":{"range":[3934,3964],"original":true},"signature":{"range":{"stop":3964,"start":3932},"pp":" : IntegrableOn f_9_8_5 (Icc 0 1)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","BoundedInterval"],["Chapter10"],["Chapter11","IntegrableOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter10"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","IntegrableOn"]},"ref":{"range":{"stop":4039,"start":3878},"pp":"/-- Example 11.9.2 -/\ntheorem of_f_9_8_5 : IntegrableOn f_9_8_5 (Icc 0 1) :=\n  integ_of_monotone (StrictMonoOn.of_f_9_8_5.mono (by simp)).monotoneOn","original":true},"params":[],"name":["Chapter11","IntegrableOn","of_f_9_8_5"],"modifiers":null,"kind":"theorem","id":{"range":[3908,3931],"original":true}},{"value":{"range":[4071,4107],"original":true},"type":null,"signature":{"range":null,"pp":"","original":false},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","BoundedInterval"],["Chapter10"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter10"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11"]},"ref":{"range":{"stop":4107,"start":4041},"pp":"noncomputable abbrev F_11_9_2 := fun x ↦ integ f_9_8_5 (Icc 0 x)","original":true},"params":[],"name":["Chapter11","F_11_9_2"],"modifiers":null,"kind":"abbrev","id":{"range":[4062,4070],"original":true}},{"value":{"range":[4177,4216],"original":true},"type":{"range":[4144,4176],"original":true},"signature":{"range":{"stop":4176,"start":4142},"pp":" : ContinuousOn F_11_9_2 (.Icc 0 1)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","BoundedInterval"],["Chapter10"],["Chapter11","ContinuousOn"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter10"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","ContinuousOn"]},"ref":{"range":{"stop":4216,"start":4109},"pp":"theorem of_F_11_9_2 : ContinuousOn F_11_9_2 (.Icc 0 1) :=\n  cts_of_integ IntegrableOn.of_f_9_8_5","original":true},"params":[],"name":["Chapter11","ContinuousOn","of_F_11_9_2"],"modifiers":null,"kind":"theorem","id":{"range":[4117,4141],"original":true}},{"value":{"range":[4367,4612],"original":true},"type":{"range":[4318,4366],"original":true},"signature":{"range":{"stop":4366,"start":4255},"pp":" {x : ℝ} (hx : ¬∃ r : ℚ, x = r) (hx' : x ∈ Set.Icc 0 1) : DifferentiableWithinAt ℝ F_11_9_2 (.Icc 0 1) x","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","DifferentiableOn"],["Chapter11","BoundedInterval"],["Chapter10"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter10"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","DifferentiableOn"]},"ref":{"range":{"stop":4612,"start":4218},"pp":"theorem of_F_11_9_2 {x : ℝ} (hx : ¬∃ r : ℚ, x = r) (hx' : x ∈ Set.Icc 0 1) :\n    DifferentiableWithinAt ℝ F_11_9_2 (.Icc 0 1) x :=\n  by\n  have := deriv_of_integ (show 0 < 1 by norm_num) .of_f_9_8_5 hx' (ContinuousAt.of_f_9_8_5 hx).continuousWithinAt\n  rw [hasDerivWithinAt_iff_hasFDerivWithinAt] at this\n  use (ContinuousLinearMap.smulRight (1 : ℝ →L[ℝ] ℝ) (f_9_8_5 x))","original":true},"params":[{"type":[4258,4261],"ref":[4256,4257],"id":[4256,4257],"bi":"implicit"},{"type":[4268,4287],"ref":[4264,4266],"id":[4264,4266],"bi":"default"},{"type":[4295,4312],"ref":[4290,4293],"id":[4290,4293],"bi":"default"}],"name":["Chapter11","DifferentiableOn","of_F_11_9_2"],"modifiers":null,"kind":"theorem","id":{"range":[4226,4254],"original":true}},{"value":{"range":[4767,4778],"original":true},"type":{"range":[4715,4766],"original":true},"signature":{"range":{"stop":4766,"start":4675},"pp":" {q : ℚ} (hq : (q : ℝ) ∈ Set.Icc 0 1) : ¬DifferentiableWithinAt ℝ F_11_9_2 (.Icc 0 1) q","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","DifferentiableOn"],["Chapter11","BoundedInterval"],["Chapter10"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter10"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","DifferentiableOn"]},"ref":{"range":{"stop":4778,"start":4614},"pp":"/-- Exercise 11.9.1 -/\ntheorem of_F_11_9_2' {q : ℚ} (hq : (q : ℝ) ∈ Set.Icc 0 1) : ¬DifferentiableWithinAt ℝ F_11_9_2 (.Icc 0 1) q := by sorry","original":true},"params":[{"type":[4678,4681],"ref":[4676,4677],"id":[4676,4677],"bi":"implicit"},{"type":[4688,4711],"ref":[4684,4686],"id":[4684,4686],"bi":"default"}],"name":["Chapter11","DifferentiableOn","of_F_11_9_2'"],"modifiers":null,"kind":"theorem","id":{"range":[4645,4674],"original":true}},{"value":{"range":[4968,5043],"original":true},"type":null,"signature":{"range":{"stop":4967,"start":4928},"pp":" (F f : ℝ → ℝ) (I : BoundedInterval)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","BoundedInterval"],["Chapter10"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter10"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11"]},"ref":{"range":{"stop":5043,"start":4780},"pp":"/-- Definition 11.9.3.  We drop the requirement that x be a limit point as this makes\n    the Lean arguments slightly cleaner -/\nabbrev AntiderivOn (F f : ℝ → ℝ) (I : BoundedInterval) :=\n  DifferentiableOn ℝ F I ∧ ∀ x ∈ I, HasDerivWithinAt F (f x) I x","original":true},"params":[{"type":[4934,4945],"ref":[4929,4930],"id":[4929,4930],"bi":"default"},{"type":[4934,4945],"ref":[4931,4932],"id":[4931,4932],"bi":"default"},{"type":[4951,4966],"ref":[4948,4949],"id":[4948,4949],"bi":"default"}],"name":["Chapter11","AntiderivOn"],"modifiers":null,"kind":"abbrev","id":{"range":[4916,4927],"original":true}},{"value":{"range":[5172,5269],"original":true},"type":{"range":[5154,5171],"original":true},"signature":{"range":{"stop":5171,"start":5070},"pp":" {F f : ℝ → ℝ} {I J : BoundedInterval} (h : AntiderivOn F f I) (hIJ : J ⊆ I) : AntiderivOn F f J","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","AntiderivOn"],["Chapter11","BoundedInterval"],["Chapter10"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter10"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11","AntiderivOn"]},"ref":{"range":{"stop":5269,"start":5045},"pp":"theorem mono {F f : ℝ → ℝ} {I J : BoundedInterval} (h : AntiderivOn F f I) (hIJ : J ⊆ I) : AntiderivOn F f J :=\n  ⟨h.1.mono hIJ, by intro x hx; rw [subset_iff] at hIJ; exact (h.2 x (hIJ hx)).mono hIJ⟩","original":true},"params":[{"type":[5076,5087],"ref":[5071,5072],"id":[5071,5072],"bi":"implicit"},{"type":[5076,5087],"ref":[5073,5074],"id":[5073,5074],"bi":"implicit"},{"type":[5095,5110],"ref":[5090,5091],"id":[5090,5091],"bi":"implicit"},{"type":[5095,5110],"ref":[5092,5093],"id":[5092,5093],"bi":"implicit"},{"type":[5118,5135],"ref":[5115,5116],"id":[5115,5116],"bi":"default"},{"type":[5143,5150],"ref":[5138,5141],"id":[5138,5141],"bi":"default"}],"name":["Chapter11","AntiderivOn","mono"],"modifiers":null,"kind":"theorem","id":{"range":[5053,5069],"original":true}},{"value":{"range":[5505,10169],"original":true},"type":{"range":[5475,5504],"original":true},"signature":{"range":{"stop":5504,"start":5365},"pp":" {a b : ℝ} (h : a ≤ b) {f F : ℝ → ℝ} (hf : IntegrableOn f (Icc a b)) (hF : AntiderivOn F f (Icc a b)) :\n  integ f (Icc a b) = F b - F a","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","BoundedInterval"],["Chapter10"],["Chapter9"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter10"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11"]},"ref":{"range":{"stop":10169,"start":5271},"pp":"/-- Theorem 11.9.4 (Second Fundamental Theorem of Calculus) -/\ntheorem integ_eq_antideriv_sub {a b : ℝ} (h : a ≤ b) {f F : ℝ → ℝ} (hf : IntegrableOn f (Icc a b))\n    (hF : AntiderivOn F f (Icc a b)) : integ f (Icc a b) = F b - F a := by\n  -- This proof is written to follow the structure of the original text.\n  \n  obtain h | h := lt_or_eq_of_le h\n  . have hF_cts : ContinuousOn F (.Icc a b) := by intro x hx;\n      exact\n        ContinuousWithinAt.of_differentiableWithinAt\n          (hF.1 x hx)\n            -- for technical reasons we need to extend F by constant outside of Icc a b\n            \n    let F' : ℝ → ℝ := fun x ↦ F (max (min x b) a)\n    have hFF' {x : ℝ} (hx : x ∈ Set.Icc a b) : F' x = F x := by simp_all [F']\n    have hF'_cts : ContinuousOn F' (Ioo (a - 1) (b + 1)) :=\n      by\n      convert (hF_cts.comp_continuous (f := fun x ↦ max (min x b) a) (by fun_prop) ?_).continuousOn using 1\n      intros; simp [le_of_lt h]\n    have hupper (P : Partition (Icc a b)) : upper_riemann_sum f P ≥ F b - F a :=\n      by\n      have := P.sum_of_α_length F'\n      calc\n        _ ≥ ∑ J ∈ P.intervals, F'[J]ₗ := by\n          apply Finset.sum_le_sum\n          intro J hJ; by_cases hJ_empty : (J : Set ℝ) = ∅\n          . simp [α_length_of_empty _ hJ_empty, length_of_empty hJ_empty]\n          obtain hJab | hJab := le_or_gt J.b J.a\n          . push_neg at hJ_empty; choose x hx using hJ_empty\n            cases J with\n            | Ioo _ _ => simp at hx; linarith\n            | Ioc _ _ => simp at hx; linarith\n            | Ico _ _ => simp at hx; linarith\n            | Icc c d =>\n              simp at hx\n              simp [show c = d by linarith]\n              have hnhds : (Ioo (a - 1) (b + 1) : Set ℝ) ∈ nhds d :=\n                by\n                apply P.contains at hJ\n                simp [subset_iff] at hJ\n                rw [Set.Icc_subset_Icc_iff (by linarith)] at hJ\n                apply Ioo_mem_nhds <;> linarith\n              rw [α_length_of_pt, jump_of_continuous hnhds (hF'_cts _ (mem_of_mem_nhds hnhds))]\n          set c := J.a\n          set d := J.b\n          apply P.contains at hJ\n          have hJ' : Icc a b ⊆ Ioo (a - 1 / 2) (b + 1 / 2) := by apply Set.Icc_subset_Ioo <;> linarith\n          apply((Ioo_subset J).trans hJ).trans at hJ'\n          simp [subset_iff] at hJ'\n          rw [Set.Ioo_subset_Ioo_iff hJab] at hJ'\n          have hJ'' : Icc a b ⊆ Ioo (a - 1) (b + 1) := by apply Set.Icc_subset_Ioo <;> linarith\n          apply hJ.trans at hJ''\n          rw [α_length_of_cts _ (le_of_lt hJab) _ hJ'' hF'_cts] <;> try linarith\n          have := HasDerivWithinAt.mean_value hJab (hF'_cts.mono ?_) ?_\n          . choose e he hmean using this\n            have : HasDerivWithinAt F' (f e) (.Ioo c d) e :=\n              by\n              apply(Ioo_subset J).trans at hJ\n              simp [subset_iff] at hJ\n              apply ((hF.2 e (hJ he)).mono hJ).congr (f := F)\n              all_goals grind\n            replace := derivative_unique ?_ this hmean\n            .\n              calc\n                _ = F' d - F' c := rfl\n                _ = (d - c) * f e := by\n                  rw [this]; have : d - c > 0 := by linarith\n                  field_simp\n                _ = f e * |J|ₗ := by simp [mul_comm, length]; left; rw [max_eq_left (by linarith)]\n                _ ≤ _ := by\n                  gcongr; apply le_csSup\n                  . rw [bddAbove_def]\n                    choose M hM using hf.1; use M\n                    simp [abs_le', -Set.mem_Icc] at hM ⊢\n                    intro x hx; rw [subset_iff] at hJ; specialize hM x (hJ hx); tauto\n                  simp; use e; simp; exact ((subset_iff _ _).mp (Ioo_subset J)) he\n            rw [← mem_closure_iff_clusterPt]\n            apply closure_mono (s := .Ioo e d)\n            . intro _ _; simp at *; refine ⟨⟨?_, ?_⟩, ?_⟩ <;> linarith\n            simp at he; rw [closure_Ioo (by linarith)]; simp; linarith\n          . simp; rw [Set.Icc_subset_Ioo_iff (le_of_lt hJab)]; grind\n          apply(Ioo_subset J).trans at hJ\n          apply (hF.1.mono _).congr\n          . intro x hx\n            have : x ∈ Set.Icc a b := by specialize hJ _ hx; simpa using hJ\n            grind\n          grind [subset_iff]\n        _ = F'[Icc a b]ₗ := (P.sum_of_α_length F')\n        _ = F' b - F' a := by\n          apply α_length_of_cts _ _ _ _ hF'_cts <;> try linarith\n          intro _ _; simp [mem_iff] at *; grind\n        _ = _ := by congr 1 <;> apply hFF' <;> grind\n    have hlower (P : Partition (Icc a b)) : lower_riemann_sum f P ≤ F b - F a := by sorry\n    replace hupper : upper_integral f (Icc a b) ≥ F b - F a :=\n      by\n      rw [upper_integ_eq_inf_upper_sum hf.1]; apply le_csInf <;> simp [Set.range_nonempty]\n      grind\n    replace hlower : lower_integral f (Icc a b) ≤ F b - F a :=\n      by\n      rw [lower_integ_eq_sup_lower_sum hf.1]; apply csSup_le <;> simp [Set.range_nonempty]\n      grind\n    linarith [hf.2]\n  simp [h]; exact (integ_on_subsingleton (by simp [length])).2","original":true},"params":[{"type":[5370,5373],"ref":[5366,5367],"id":[5366,5367],"bi":"implicit"},{"type":[5370,5373],"ref":[5368,5369],"id":[5368,5369],"bi":"implicit"},{"type":[5378,5385],"ref":[5376,5377],"id":[5376,5377],"bi":"default"},{"type":[5393,5404],"ref":[5388,5389],"id":[5388,5389],"bi":"implicit"},{"type":[5393,5404],"ref":[5390,5391],"id":[5390,5391],"bi":"implicit"},{"type":[5413,5437],"ref":[5409,5411],"id":[5409,5411],"bi":"default"},{"type":[5444,5469],"ref":[5440,5442],"id":[5440,5442],"bi":"default"}],"name":["Chapter11","integ_eq_antideriv_sub"],"modifiers":null,"kind":"theorem","id":{"range":[5342,5364],"original":true}},{"value":{"range":[10225,10278],"original":true},"type":{"range":[10213,10224],"original":true},"signature":{"range":{"stop":10224,"start":10211},"pp":" : ℝ → ℝ","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","BoundedInterval"],["Real"],["Chapter10"],["Chapter9"],["Chapter9","Real"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9","Real"],"except":[]}},{"simple":{"namespace":["Real"],"except":[]}},{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter10"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11"]},"ref":{"range":{"stop":10278,"start":10183},"pp":"noncomputable abbrev F_11_9 : ℝ → ℝ := fun x ↦ if x = 0 then 0 else x ^ 2 * sin (1 / x ^ 3)","original":true},"params":[],"name":["Chapter11","F_11_9"],"modifiers":null,"kind":"abbrev","id":{"range":[10204,10210],"original":true}},{"value":{"range":[10316,10327],"original":true},"type":{"range":[10290,10315],"original":true},"signature":{"range":{"stop":10315,"start":10288},"pp":" : Differentiable ℝ F_11_9","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","BoundedInterval"],["Real"],["Chapter10"],["Chapter9"],["Chapter9","Real"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9","Real"],"except":[]}},{"simple":{"namespace":["Real"],"except":[]}},{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter10"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11"]},"ref":{"range":{"stop":10327,"start":10280},"pp":"example : Differentiable ℝ F_11_9 := by sorry","original":true},"params":[],"name":["Chapter11","_example"],"modifiers":null,"kind":"example","id":{"range":[10280,10287],"original":false}},{"value":{"range":[10377,10388],"original":true},"type":{"range":[10339,10376],"original":true},"signature":{"range":{"stop":10376,"start":10337},"pp":" : ¬BddOn (deriv F_11_9) (.Icc (-1) 1)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","BoundedInterval"],["Real"],["Chapter10"],["Chapter9"],["Chapter9","Real"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9","Real"],"except":[]}},{"simple":{"namespace":["Real"],"except":[]}},{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter10"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11"]},"ref":{"range":{"stop":10388,"start":10329},"pp":"example : ¬BddOn (deriv F_11_9) (.Icc (-1) 1) := by sorry","original":true},"params":[],"name":["Chapter11","_example"],"modifiers":null,"kind":"example","id":{"range":[10329,10336],"original":false}},{"value":{"range":[10447,10458],"original":true},"type":{"range":[10400,10446],"original":true},"signature":{"range":{"stop":10446,"start":10398},"pp":" : AntiderivOn F_11_9 (deriv F_11_9) (Icc (-1) 1)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","BoundedInterval"],["Real"],["Chapter10"],["Chapter9"],["Chapter9","Real"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9","Real"],"except":[]}},{"simple":{"namespace":["Real"],"except":[]}},{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter10"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11"]},"ref":{"range":{"stop":10458,"start":10390},"pp":"example : AntiderivOn F_11_9 (deriv F_11_9) (Icc (-1) 1) := by sorry","original":true},"params":[],"name":["Chapter11","_example"],"modifiers":null,"kind":"example","id":{"range":[10390,10397],"original":false}},{"value":{"range":[10682,10697],"original":true},"type":{"range":[10638,10681],"original":true},"signature":{"range":{"stop":10681,"start":10539},"pp":" {I : BoundedInterval} {f F G : ℝ → ℝ} (hfF : AntiderivOn F f I) (hfG : AntiderivOn G f I) :\n  ∃ C, ∀ x ∈ (I : Set ℝ), F x = G x + C","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","BoundedInterval"],["Real"],["Chapter10"],["Chapter9"],["Chapter9","Real"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9","Real"],"except":[]}},{"simple":{"namespace":["Real"],"except":[]}},{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter10"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11"]},"ref":{"range":{"stop":10697,"start":10460},"pp":"/-- Lemma 11.9.5 / Exercise 11.9.2 -/\ntheorem antideriv_eq_antideriv_add_const {I : BoundedInterval} {f F G : ℝ → ℝ} (hfF : AntiderivOn F f I)\n    (hfG : AntiderivOn G f I) : ∃ C, ∀ x ∈ (I : Set ℝ), F x = G x + C := by sorry","original":true},"params":[{"type":[10542,10557],"ref":[10540,10541],"id":[10540,10541],"bi":"implicit"},{"type":[10568,10579],"ref":[10560,10561],"id":[10560,10561],"bi":"implicit"},{"type":[10568,10579],"ref":[10562,10563],"id":[10562,10563],"bi":"implicit"},{"type":[10568,10579],"ref":[10564,10565],"id":[10564,10565],"bi":"implicit"},{"type":[10589,10606],"ref":[10584,10587],"id":[10584,10587],"bi":"default"},{"type":[10614,10631],"ref":[10609,10612],"id":[10609,10612],"bi":"default"}],"name":["Chapter11","antideriv_eq_antideriv_add_const"],"modifiers":null,"kind":"theorem","id":{"range":[10506,10538],"original":true}},{"value":{"range":[10947,10960],"original":true},"type":{"range":[10834,10946],"original":true},"signature":{"range":{"stop":10946,"start":10730},"pp":" {a b x₀ : ℝ} (hab : a < b) (hx₀ : x₀ ∈ Icc a b) {f : ℝ → ℝ} (hf : MonotoneOn f (Icc a b)) :\n  DifferentiableWithinAt ℝ (fun x => integ f (Icc a x)) (Icc a b) x₀ ↔ ContinuousWithinAt f (Icc a b) x₀","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter11","BoundedInterval"],["Real"],["Chapter10"],["Chapter9"],["Chapter9","Real"],["Chapter11"]],"openDecl":[{"simple":{"namespace":["Chapter9","Real"],"except":[]}},{"simple":{"namespace":["Real"],"except":[]}},{"simple":{"namespace":["Chapter11","BoundedInterval"],"except":[]}},{"simple":{"namespace":["Chapter10"],"except":[]}},{"simple":{"namespace":["Chapter9"],"except":[]}}],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter11"]},"ref":{"range":{"stop":10960,"start":10699},"pp":"/-- Exercise 11.9.3 -/\nexample {a b x₀ : ℝ} (hab : a < b) (hx₀ : x₀ ∈ Icc a b) {f : ℝ → ℝ} (hf : MonotoneOn f (Icc a b)) :\n    DifferentiableWithinAt ℝ (fun x => integ f (Icc a x)) (Icc a b) x₀ ↔ ContinuousWithinAt f (Icc a b) x₀ := by sorry","original":true},"params":[{"type":[10740,10743],"ref":[10731,10732],"id":[10731,10732],"bi":"implicit"},{"type":[10740,10743],"ref":[10733,10734],"id":[10733,10734],"bi":"implicit"},{"type":[10740,10743],"ref":[10735,10739],"id":[10735,10739],"bi":"implicit"},{"type":[10751,10756],"ref":[10746,10749],"id":[10746,10749],"bi":"default"},{"type":[10766,10782],"ref":[10759,10764],"id":[10759,10764],"bi":"default"},{"type":[10788,10799],"ref":[10785,10786],"id":[10785,10786],"bi":"implicit"},{"type":[10806,10828],"ref":[10802,10804],"id":[10802,10804],"bi":"default"}],"name":["Chapter11","_example"],"modifiers":null,"kind":"example","id":{"range":[10722,10729],"original":false}},{"value":{"range":[11146,11159],"original":true},"type":{"range":[11076,11145],"original":true},"signature":{"range":{"stop":11145,"start":11066},"pp":" (p : ℝ) : (mk' (m := 1) fun n ↦ 1 / (n : ℝ) ^ p : Series).converges ↔ (p > 1)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter7","Series"],["Chapter7"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":{"stop":11159,"start":10977},"pp":"/-- Exercise 11.6.5, moved to Section 11.9 -/\ntheorem converges_qseries' (p : ℝ) : (mk' (m := 1) fun n ↦ 1 / (n : ℝ) ^ p : Series).converges ↔ (p > 1) := by sorry","original":true},"params":[{"type":[11069,11072],"ref":[11067,11068],"id":[11067,11068],"bi":"default"}],"name":["Chapter7","Series","converges_qseries'"],"modifiers":null,"kind":"theorem","id":{"range":[11031,11065],"original":true}},{"value":{"range":[11288,11301],"original":true},"type":{"range":[11215,11287],"original":true},"signature":{"range":{"stop":11287,"start":11205},"pp":" (p : ℝ) : (mk' (m := 1) fun n ↦ 1 / (n : ℝ) ^ p : Series).absConverges ↔ (p > 1)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Chapter7","Series"],["Chapter7"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Chapter7","Series"]},"ref":{"range":{"stop":11301,"start":11161},"pp":"theorem converges_qseries'' (p : ℝ) : (mk' (m := 1) fun n ↦ 1 / (n : ℝ) ^ p : Series).absConverges ↔ (p > 1) := by sorry","original":true},"params":[{"type":[11208,11211],"ref":[11206,11207],"id":[11206,11207],"bi":"default"}],"name":["Chapter7","Series","converges_qseries''"],"modifiers":null,"kind":"theorem","id":{"range":[11169,11204],"original":true}}]
