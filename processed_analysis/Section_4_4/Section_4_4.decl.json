[{"value":{"range":[1077,1090],"original":true},"type":{"range":[1045,1076],"original":true},"signature":{"range":{"stop":1076,"start":1035},"pp":" (x : ℚ) : ∃! n : ℤ, n ≤ x ∧ x < n + 1","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Rat"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Rat"]},"ref":{"range":{"stop":1090,"start":928},"pp":"/-- Proposition 4.4.1 (Interspersing of integers by rationals) / Exercise 4.4.1 -/\ntheorem between_int (x : ℚ) : ∃! n : ℤ, n ≤ x ∧ x < n + 1 := by sorry","original":true},"params":[{"type":[1038,1041],"ref":[1036,1037],"id":[1036,1037],"bi":"default"}],"name":["Rat","between_int"],"modifiers":null,"kind":"theorem","id":{"range":[1019,1034],"original":true}},{"value":{"range":[1141,1154],"original":true},"type":{"range":[1124,1140],"original":true},"signature":{"range":{"stop":1140,"start":1114},"pp":" (x : ℚ) : ∃ n : ℕ, n > x","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Nat"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Nat"]},"ref":{"range":{"stop":1154,"start":1092},"pp":"theorem exists_gt (x : ℚ) : ∃ n : ℕ, n > x := by sorry","original":true},"params":[{"type":[1117,1120],"ref":[1115,1116],"id":[1115,1116],"bi":"default"}],"name":["Nat","exists_gt"],"modifiers":null,"kind":"theorem","id":{"range":[1100,1113],"original":true}},{"value":{"range":[1291,1752],"original":true},"type":{"range":[1264,1290],"original":true},"signature":{"range":{"stop":1290,"start":1241},"pp":" {x y : ℚ} (h : x < y) : ∃ z : ℚ, x < z ∧ z < y","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Rat"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Rat"]},"ref":{"range":{"stop":1752,"start":1156},"pp":"/-- Proposition 4.4.3 (Interspersing of rationals) -/\ntheorem exists_between_rat {x y : ℚ} (h : x < y) : ∃ z : ℚ, x < z ∧ z < y := by\n  -- This proof is written to follow the structure of the original text.\n    -- The reader is encouraged to find shorter proofs, for instance\n    -- using Mathlib's `linarith` tactic.\n  \n  use (x + y) / 2\n  have h' : x / 2 < y / 2 :=\n    by\n    rw [show x / 2 = x * (1 / 2) by ring, show y / 2 = y * (1 / 2) by ring]\n    apply mul_lt_mul_of_pos_right h; positivity\n  constructor\n  . convert add_lt_add_right h' (x / 2) using 1 <;> ring\n  convert add_lt_add_right h' (y / 2) using 1 <;> ring","original":true},"params":[{"type":[1246,1249],"ref":[1242,1243],"id":[1242,1243],"bi":"implicit"},{"type":[1246,1249],"ref":[1244,1245],"id":[1244,1245],"bi":"implicit"},{"type":[1255,1260],"ref":[1252,1253],"id":[1252,1253],"bi":"default"}],"name":["Rat","exists_between_rat"],"modifiers":null,"kind":"theorem","id":{"range":[1218,1240],"original":true}},{"value":{"range":[1853,1866],"original":true},"type":{"range":[1810,1852],"original":true},"signature":{"range":{"stop":1852,"start":1808},"pp":" : ¬∃ a : ℕ → ℕ, ∀ n, a (n + 1) < a n","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Nat"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Nat"]},"ref":{"range":{"stop":1866,"start":1754},"pp":"/-- Exercise 4.4.2 -/\ntheorem no_infinite_descent : ¬∃ a : ℕ → ℕ, ∀ n, a (n + 1) < a n := by sorry","original":true},"params":[],"name":["Nat","no_infinite_descent"],"modifiers":null,"kind":"theorem","id":{"range":[1784,1807],"original":true}},{"value":{"range":[1947,2053],"original":true},"type":{"range":[1895,1946],"original":true},"signature":{"range":{"stop":1946,"start":1893},"pp":" : Decidable (∃ a : ℕ → ℤ, ∀ n, a (n + 1) < a n)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Int"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Int"]},"ref":{"range":{"stop":2053,"start":1868},"pp":"def infinite_descent : Decidable (∃ a : ℕ → ℤ, ∀ n, a (n + 1) < a n) := by\n  -- the first line of this construction should be either `apply isTrue` or `apply isFalse`.\n  sorry","original":true},"params":[],"name":["Int","infinite_descent"],"modifiers":null,"kind":"definition","id":{"range":[1872,1892],"original":true}},{"value":{"range":[2167,2180],"original":true},"type":{"range":[2150,2166],"original":true},"signature":{"range":{"stop":2166,"start":2140},"pp":" (n : ℕ) : Even n ∨ Odd n","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Nat"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Nat"]},"ref":{"range":{"stop":2180,"start":2114},"pp":"theorem even_or_odd'' (n : ℕ) : Even n ∨ Odd n := by sorry","original":true},"params":[{"type":[2143,2146],"ref":[2141,2142],"id":[2141,2142],"bi":"default"}],"name":["Nat","even_or_odd''"],"modifiers":null,"kind":"theorem","id":{"range":[2122,2139],"original":true}},{"value":{"range":[2243,2256],"original":true},"type":{"range":[2221,2242],"original":true},"signature":{"range":{"stop":2242,"start":2211},"pp":" (n : ℕ) : ¬(Even n ∧ Odd n)","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Nat"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Nat"]},"ref":{"range":{"stop":2256,"start":2182},"pp":"theorem not_even_and_odd (n : ℕ) : ¬(Even n ∧ Odd n) := by sorry","original":true},"params":[{"type":[2214,2217],"ref":[2212,2213],"id":[2212,2213],"bi":"default"}],"name":["Nat","not_even_and_odd"],"modifiers":null,"kind":"theorem","id":{"range":[2190,2210],"original":true}},{"value":{"range":[2372,4200],"original":true},"type":{"range":[2350,2371],"original":true},"signature":{"range":{"stop":2371,"start":2348},"pp":" : ¬∃ x : ℚ, x ^ 2 = 2","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Rat"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Rat"]},"ref":{"range":{"stop":4200,"start":2274},"pp":"/-- Proposition 4.4.4 / Exercise 4.4.3  -/\ntheorem not_exist_sqrt_two : ¬∃ x : ℚ, x ^ 2 = 2 := by\n  -- This proof is written to follow the structure of the original text.\n  \n  by_contra h; choose x hx using h\n  have hnon : x ≠ 0 := by aesop\n  wlog hpos : x > 0\n  . apply this _ _ _ (show -x > 0 by simp; order) <;> grind\n  have hrep : ∃ p q : ℕ, p > 0 ∧ q > 0 ∧ p ^ 2 = 2 * q ^ 2 :=\n    by\n    use x.num.toNat, x.den\n    observe hnum_pos : x.num > 0\n    observe hden_pos : x.den > 0\n    refine ⟨by simp [hpos], hden_pos, ?_⟩\n    rw [← num_div_den x] at hx; field_simp at hx\n    have hnum_cast : x.num = x.num.toNat := Int.eq_natCast_toNat.mpr (by positivity)\n    rw [hnum_cast] at hx; norm_cast at hx\n  set P : ℕ → Prop := fun p ↦ p > 0 ∧ ∃ q > 0, p ^ 2 = 2 * q ^ 2\n  have hP : ∃ p, P p := by aesop\n  have hiter (p : ℕ) (hPp : P p) : ∃ q, q < p ∧ P q :=\n    by\n    obtain hp | hp := p.even_or_odd''\n    . rw [even_iff_exists_two_mul] at hp\n      obtain ⟨k, rfl⟩ := hp\n      choose q hpos hq using hPp.2\n      have : q ^ 2 = 2 * k ^ 2 := by linarith\n      use q; constructor\n      . sorry\n      exact ⟨hpos, k, by linarith [hPp.1], this⟩\n    have h1 : Odd (p ^ 2) := by sorry\n    have h2 : Even (p ^ 2) := by\n      choose q hpos hq using hPp.2\n      rw [even_iff_exists_two_mul]\n      use q ^ 2\n    observe : ¬(Even (p ^ 2) ∧ Odd (p ^ 2))\n    tauto\n  classical\n  set f : ℕ → ℕ := fun p ↦ if hPp : P p then (hiter p hPp).choose else 0\n  have hf (p : ℕ) (hPp : P p) : (f p < p) ∧ P (f p) := by simp [f, hPp]; exact (hiter p hPp).choose_spec\n  choose p hP using hP\n  set a : ℕ → ℕ := Nat.rec p (fun n p ↦ f p)\n  have ha (n : ℕ) : P (a n) := by\n    induction n with\n    | zero => exact hP\n    | succ n ih => exact (hf _ ih).2\n  have hlt (n : ℕ) : a (n + 1) < a n :=\n    by\n    have : a (n + 1) = f (a n) := n.rec_add_one p (fun n p ↦ f p)\n    grind\n  exact Nat.no_infinite_descent ⟨a, hlt⟩","original":true},"params":[],"name":["Rat","not_exist_sqrt_two"],"modifiers":null,"kind":"theorem","id":{"range":[2325,2347],"original":true}},{"value":{"range":[4328,4737],"original":true},"type":{"range":[4284,4327],"original":true},"signature":{"range":{"stop":4327,"start":4262},"pp":" {ε : ℚ} (hε : ε > 0) : ∃ x ≥ (0 : ℚ), x ^ 2 < 2 ∧ 2 < (x + ε) ^ 2","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[["Rat"]],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":["Rat"]},"ref":{"range":{"stop":4737,"start":4203},"pp":"/-- Proposition 4.4.5 -/\ntheorem exist_approx_sqrt_two {ε : ℚ} (hε : ε > 0) : ∃ x ≥ (0 : ℚ), x ^ 2 < 2 ∧ 2 < (x + ε) ^ 2 := by\n  -- This proof is written to follow the structure of the original text.\n  \n  by_contra! h\n  have (n : ℕ) : (n * ε) ^ 2 < 2 := by\n    induction' n with n hn; simp\n    simp [add_mul]\n    apply lt_of_le_of_ne (h (n * ε) (by positivity) hn)\n    have := not_exist_sqrt_two\n    aesop\n  choose n hn using Nat.exists_gt (2 / ε)\n  rw [gt_iff_lt, div_lt_iff₀', mul_comm, ← sq_lt_sq₀] at hn <;> try positivity\n  grind","original":true},"params":[{"type":[4266,4269],"ref":[4263,4265],"id":[4263,4265],"bi":"implicit"},{"type":[4276,4280],"ref":[4272,4275],"id":[4272,4275],"bi":"default"}],"name":["Rat","exist_approx_sqrt_two"],"modifiers":null,"kind":"theorem","id":{"range":[4236,4261],"original":true}},{"value":{"range":[4845,4859],"original":true},"type":{"range":[4772,4844],"original":true},"signature":{"range":{"stop":4844,"start":4768},"pp":" :\n  let ε : ℚ := 1 / 1000\n  let x : ℚ := 1414 / 1000\n  x ^ 2 < 2 ∧ 2 < (x + ε) ^ 2","original":true},"scopeInfo":{"varDecls":[],"scopedOpenDecl":[],"openDecl":[],"omitVars":[],"levelNames":[],"includeVars":[],"currNamespace":[]},"ref":{"range":{"stop":4859,"start":4739},"pp":"/-- Example 4.4.6 -/\nexample :\n    let ε : ℚ := 1 / 1000\n    let x : ℚ := 1414 / 1000\n    x ^ 2 < 2 ∧ 2 < (x + ε) ^ 2 :=\n  by norm_num","original":true},"params":[],"name":["_example"],"modifiers":null,"kind":"example","id":{"range":[4760,4767],"original":false}}]
